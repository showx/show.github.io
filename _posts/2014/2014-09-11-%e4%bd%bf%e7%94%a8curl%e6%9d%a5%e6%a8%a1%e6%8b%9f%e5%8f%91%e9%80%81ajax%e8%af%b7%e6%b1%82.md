---
layout: post
title: 使用Curl来模拟发送Ajax请求 
date: 2014-09-11 14:44
author: admin
comments: true
categories: []
---
 使用Curl来模拟发送Ajax请求
服务器是根据HTTP请求的头信息来判断是否是一个Ajax请求
以下是一个请求的头信息实例

Accept: text/javascript , text/html, application/xml, text/xml, */*
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip,deflate
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
Keep-Alive: 300
Connection: close
X-Requested-With: XMLHttpRequest
X-Prototype-Version: 1.5.0_rc0
Content-Type: application/x-www-form-urlencoded


其中最重要的是 XMLHttpRequest 信息
那么用curl工具来模拟一个Ajax请求就很简单了

curl -H "X-Requested-With: XMLHttpRequest" http://ryan.xx.com/store/add_to_cart/2

那么返回的数据将是一个Javascript代码

=============
php curl 相关
curl_init...
..
curl_setopt($ch,CURLOPT_HTTPHEADER,array("X-Requested-With: XMLHttpRequest"));
这样php就可以模拟ajax请求了。


