---
layout: post
title: Ubuntu下调整swap分区的大小
date: 2014-12-16 09:29
author: admin
comments: true
categories: []
---
1.1.首先用命令free查看系统内 Swap 分区大小。 
Java代码  收藏代码
free -m  

显示： 
Java代码  收藏代码
total used free shared buffers cache  
Mem: 1002 964 38 0 21 410  
-/+ buffers/cache: 532 470  
Swap: 951 32 929  

可以看到 Swap 只有951M，不符合 Oracle-xe-client 的安装要求。 
1.2.创建一个 Swap 文件。 
Java代码  收藏代码
mkdir swap  
cd swap  
sudo dd if=/dev/zero of=swapfile bs=1024 count=100000  

出现下列提示，上面命令中的 count 即代表swap文件大小。 
记录了 100000+0 的读入 
记录了 100000+0 的写出 
102400000 字节 (102 MB) 已复制，0.74704 秒，137 MB/秒 

1.3.把生成的文件转换成 Swap 文件 

Java代码  收藏代码
sudo mkswap swapfile  
Setting up swapspace version 1, size = 102395 kB  
no label, UUID=09fde987-5567-498a-a60b-477e302a988b  

1.4.激活 Swap 文件。 
Java代码  收藏代码
sudo swapon swapfile  

再次查看 free -m 的结果。 

Java代码  收藏代码
total used free shared buffers cached  
Mem: 1002 967 34 0 22 410  
-/+ buffers/cache: 534 467  
Swap: 1053 32 1021  


添加成功。 

扩展： 
如果需要卸载这个 swap 文件，可以进入建立的 swap 文件目录。执行下列命令。 
Java代码  收藏代码
sudo swapoff swapfile  



如果需要一直保持这个 swap ，可以把它写入 /etc/fstab 文件。 
Java代码  收藏代码
swapfilepath swap swap defaults 0 0  

zzningxp 写道:
我发现这个写入fstab里去，开机没有效果...
引用:
6.假如需要一直保持这个 swap ，能够把他写入 /etc/fstab 文档。
/swap swap swap defaults 0 0 

谁能解释一下什么意思的？

例如： 
/dev/sda5是一个swap分区 
/swap.200m 是一个swap文件,放到/下。 
加到/etc/fstab里面： 
代码:
/dev/sda5     swap      swap defaults 0 0
/swap.200m       swap     swap defaults 0 0

开机就会自动挂载上，也可以用sudo swapon -a来手动mount，用sudo swapon -s查看。
