---
layout: post
title: Linux格式化文件系统时出现错误解决
date: 2014-12-16 10:22
author: admin
comments: true
categories: []
---
Linux格式化文件系统时出现错误解决
 
在VMware下格式化一个分区出错： 
 
# mkfs.ext3 /dev/sda2 
mke2fs 1.40.8 (13-Mar-2008) 
mkfs.ext3: inode_size (128) * inodes_count (0) too big for a 
filesystem with 0 blocks, specify higher inode_ratio (-i) 
or lower inode count (-N). 
该如何解决啊？
 
十分钟后，我是这样解决这个问题的： 
先来说一下为何要增加硬盘：当初安装Fedora时，我使用的是VM，用了三个virtual硬盘,一个6G装system挂载在/目录，一个1G挂载在SWAP分区，一个为15G的硬盘，挂载在/work目录下，存放代码资料。结果在装完system后，/分区只有一点点磁盘空间了。
 
于是就想能不能使用VMware工具增加一点磁盘容量。关掉Linux后，在VM的菜单栏的setting里，可以重新调整磁盘的大小，不过提示，多出的空间需要重新分区，我把6G的根分区增到8G，多的2G后来才知道并没有挂载根目录下。使用fdisk命令来增加了一个分区，我把它挂载到了/opt下。最初我是增加了一个expand分区/sda2,格式化时，老是弹出上面的错误，后来网上一搜，好像是说 
 
Anpartitio extended n does not really exist and takes up almost zero space on your drive. 
Its a software hack to get around the four partition limit. 
All it does is to reserve some space on the drive in which you create logical partitions to use the pace. 
Make some more partitions. 
 
这里好像说是expand格式化无意义，因为它是为logical partition服务的，它们大小一样。在一块硬盘里你最多只能创造four partiton，包括主分区与expand分区，而一个expand分区可以创造去多个logical partition，是在logical partition使用space的。
 
后面我就创造了一个逻辑分区/sda5，创造好以后，可能需要重启，看英文提示。如觉得重启麻烦，输入partprobe命令，这个命令，来让内核重新获得一次分区表的信息。之后就可以使用mount 挂载了，如果不能挂载，一般是文件系统，格式不对。
