---
layout: post
title: cURL获取302页面的跳转地址
date: 2014-02-11 14:07
author: admin
comments: true
categories: []
---
cURL获取302页面的跳转地址.主要设置curl_getinfo($ch);

$ghurl = 'http://www.scriptsbank.com/cgi-bin/links/jump.cgi?ID=8975';
// php 获取
function getContents($url){
$header = array("Referer: http://www.baidu.com/");
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_TIMEOUT, 30);
curl_setopt($ch, CURLOPT_HTTPHEADER,$header);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION,1); //是否抓取跳转后的页面
ob_start();
curl_exec($ch);
$contents = ob_get_contents();
ob_end_clean();
$x = curl_getinfo($ch);
curl_close($ch);
return $x;
}
$contents = getContents($ghurl);
print_R( $contents['url']);
?>
