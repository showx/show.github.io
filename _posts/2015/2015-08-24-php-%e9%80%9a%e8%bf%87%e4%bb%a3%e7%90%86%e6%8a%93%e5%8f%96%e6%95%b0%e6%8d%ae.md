---
layout: post
title: php 通过代理抓取数据
date: 2015-08-24 16:12
author: admin
comments: true
categories: []
---
最近需要google抓取数据：

$ci = curl_init();
$url = "http://twitter.com/phoenix/favicon.ico";
//$url = "http://www.google.com";
$url = "http://www.google.com";
curl_setopt($ci, CURLOPT_HTTPPROXYTUNNEL, false);
curl_setopt($ci, CURLOPT_PROXY, '127.0.0.1:1080');
curl_setopt($ci, CURLOPT_PROXYTYPE, CURLPROXY_SOCKS5);
curl_setopt($ci,CURLOPT_CUSTOMREQUEST,'GET');
curl_setopt($ci,CURLOPT_FOLLOWLOCATION,1); //302跳转

curl_setopt($ci, CURLOPT_URL, $url);
$info = curl_getinfo($ci);
$error = curl_errno($ci);

$response = curl_exec($ci);
curl_close($ci);
var_dump($response,$info,$error);
exit();

注：

网址是https的还要设置ssl相关：

curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
