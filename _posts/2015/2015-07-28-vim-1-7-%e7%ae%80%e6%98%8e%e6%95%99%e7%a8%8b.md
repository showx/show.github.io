---
layout: post
title: VIM 1.7 简明教程
date: 2015-07-28 11:18
author: admin
comments: true
categories: []
---
VIM 1.7 简明教程


前言

1.  VIM 是一个文本编辑器，适用于代码编辑。它功能非常强大，这点我逐渐体会到了，但要说用户习惯或方便的话，就因人而异了。

2.  本文是我从 Fedora Linux 8 下的 vimtutor 中学习的小结。如果你是使用 VIM 的新手，希望对你有所帮助；高手的话就不必浪费你的时间了。

3.  VIM 的命令很多，一定要实际使用练习，只记命令是很容易忘记的。

4.  VIM 中有多种模式，较基本的有：普通模式、插入模式、替换模式、命令模式。还有其它高级的模式，但已超出本文主题。

4.1 VIM 的几种工作模式
普通模式：   VIM启动后就默认在此模式工作，该模式下，用户不能正常编辑的，输入的字符被视为一个命令。
可视模式：   在该模式下，用户可以移动光标进行文本的选择，以便进行复制等操作。
插入模式：   在该模式下，用户可以进行正常的文本编辑。
替换模式：   跟插入模式相似，用户可以进行文本编辑，不同之处是，用户输入的字符将替换光标处的字符。该模式也可称覆盖模式。
命令模式：   当用户从普通模式按健 ':' 时，VIM 切换到命令模式，这时，光标切换到编辑器最底端的一行，等待用户输入命令。输入命令完成后，按回车键执行该命令；按 &lt;ESC&gt; 键将取消输入的命令，并返回到普通模式。

4.2 VIM 工作模式的切换

4.2.1 普通模式进行其它模式

a   进入插入模式，即（Append）。
v   进入可视模式，即（Visual）。
i   进入插入模式，即（Insert）。
R   进入替换模式，即（Replace）。
:   进入命令模式。

4.2.2 其它模式进入普通模式

一般地，要想从其它模式退回到普通模式，按 &lt;ESC&gt; 键即可，一次或多次。

5.  约定

5.1 本文主要是介绍普通模式下的常用命令，区分字母大小。

5.2 对于组合键，例如 CTRL-D 表示按下 Control 键不松开，再按字母键 d。


开始

1.1 移动光标

h   向左移动光标
l   向右移动光标
j   向下移动光标
k   向上移动光标

（小键盘的方向键也可以实现光标的移动，但当你熟悉这四个键使用时，编辑的效率将更高！）

1.2 退出VIM

:q      如果没有任何修改，则退出VIM；否则，会提示你是否保存修改。
:q!     放弃所有更改并退出。

1.3 删除

x       删除光标所在的字符。

1.4 插入

i       在光标所在字符前插入字符。

1.5 插入（追回）

a       在光标所在字符后插入字符。
A       在光标所在行的末尾插入字符。

1.6 保存

:w       保存对当前编辑的文件。
:w!      保存对当前编辑的文件，如果文件已经存在，则覆盖文件。
:wq      保存对当前编辑的文件并退出。


2.1 更多删除功能

dw      从光标处开始删除，直到遇到下一个单词。 （可用于删除单词）
de      从光标处开始删除，直到单词的结尾。（可用于删除单词）
d$      从光标处开始删除，直到行尾。
dd      删除光标所在行。
（在以上这些两个键的删除命令之间，中间加入数字，则表示重复几次这样删除操作。）

2.3 移动光标（以单词为单位）

数字w   从光标处开始，将光标移至第几个单词的开始处。
数字e   从光标处开始，将光标移至第几个单词的结尾处。
0       将光标移至行首位置。
$       将光标移至行尾位置。

2.4 撤消

u       撤消一次操作。
U       撤消当前在光标所在行的修改。

2.5 重复

CTRL-R  重复最后一次的撤消。


3.1 粘贴

p       粘贴操作。
（如果之前进行了删除操作，则按 p 键时，将在光标处粘贴删除内容）

3.2 替换

r       替换一个字符（Replace）。
R       将普通模式切换至替换模式进行编辑。

3.3 修改

ce      从光标处开始删除，直到单词的结尾，并切换到插入模式进行文本编辑。
cw      从光标处开始删除，直到遇到下一个单词，并切换到插入模式进行文本编辑。
（ 该操作与删除键 d 的使用类似。所不同的是，该命令在删除操作之后，进入插入模式，以进行文本编辑。）


4.1 文件状态与光标位置

CTRL-G  将在 VIM 的状态栏显示正在编辑的文件相关信息，如名称、大小等，同时显示光标的当前位置信息。
gg      将光标移到文件的开始处。
G       将光标移到文件的结尾处。
数字G   将光标移到第几行。

4.2 查找

/       VIM 将光标移到最底行，此时输入文本并回车进行向后查找。接着，使用 n 键向后查找下一个； 使用 N 键向前查找下一个。
?       VIM 将光标移到最底行，此时输入文本并回车进行向前查找。接着，使用 n 键向前查找下一个； 使用 N 键向后查找下一个。

4.3 显示括号是否匹配

%       将光标移到有括号的位置，按此键将高亮显示匹配的括号。（常用于检查代码中的括号是否匹配）

4.4 查找替换

:s/old/new      从光标处开始，向后查找一个 old 文本，并将它替换成 new 文本。
:s/old/new/g    将光标所在行的所有 old 文本替都换成 new 文本。
:数字,数字s/old/new/g   将第几行到第几行的所有 old 文本都替换成 new 文本。
:%s/old/new/g   将文件中所有 old 文本替都换成 new 文本。
:%s/old/new/gc  将文件中所有 old 文本替都换成 new 文本，但要进行确认。


5.1 执行外部命令

:!      例如命令 :!ls 将在列出当前目录下的文件列表。
:sh     将打开一个新的 SHELL 控制台。

5.2 选择部分文本进行另存为文件

例如，按 v 键进行可视模式；移到光标会高亮选择文本；输入 :w test.txt 将会把选择的部分文本保存到 test.txt 文件。

5.3 在文件中插入外部文本

例如，普通模式下，输入 :r test.txt 将会读入 test.txt 文件的内容到光标处。
例如，普通模式下，输入 :r !ls 将会把命令 ls 的输出读入到文件的光标处。


6.1 插入新行

o       在光标所在行下面插入一新行，并进入插入模式以进行编辑。
O       在光标所在行上面插入一新行，并进入插入模式以进行编辑。

6.2 复制粘贴

首先，按键 v 进入可视模式，移动光标高亮选择文本，接着，按键 y 以对所选文本进行复制，然后，将光标移到要粘贴的位置按键 p 完成粘贴操作。

6.3 设置选项

:set 选项       设置一个选项。
:set 选项?      查询该选项是否已经设置。
（常用的选项有： ic 或 IgnoreCase，hls 或 HighLightSearch，is 或 IncrementSearch。 在选项前面加 no 表示关闭该选项，如 :set nohls 表示查找时不高亮显示）
（输入 :set 之后，按键 CTRL-D 将列出所有可用的选项，也可按 TAB 键自动匹配一个选项）

6.4 滚动屏幕

CTRL-E      向下滚动一行。
CTRL-D      向下滚动一屏。
CTRL-Y      向上滚动一行。
CTRL-Y      向上滚动一屏。
z&lt;ENTER&gt;    光标所在行置顶。
z.          光标所在行垂直居中。
z-          光标所在行置底。

6.5 返回光标的历史位置

CTRL-O      返回到光标上一次的历史位置。
CTRL-I      撤消返回到光标上一次的历史位置。


7.1 获取帮助

:help           进入帮助页面。
:help xxx       进入 xxx 的主题帮助，如果有的话。
