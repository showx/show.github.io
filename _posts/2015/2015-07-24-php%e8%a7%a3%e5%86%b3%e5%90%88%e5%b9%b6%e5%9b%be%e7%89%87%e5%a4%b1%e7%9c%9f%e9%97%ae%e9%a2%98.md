---
layout: post
title: PHP解决合并图片失真问题
date: 2015-07-24 09:07
author: admin
comments: true
categories: []
---
查了涉及到的相关php自带函数，发现是imagecopyresampled的原因，图片合并后的质量会被$OR影响
那就查看生成二维码的代码，果然QRimage类下的方法image下由两处地方生成图片都用imagecreate，将其改为imagecreatetruecolor，这样就会生成不失真logo的二维码图片咯。
 代码有些不足就是总是要存一次没有加logo的二维码，然后在读出来，下次再研究吧，phpqrcode应该可以输出图片流吧。。。。

$ni = imagecreatetruecolor($toW,$toH); //创建真彩色图片
$bg_x = (($toW-$ftoW)/2);
$bg_y = (($toH-$ftoH)/2);
$color=imagecolorallocate($ni,255,255,255); //创建颜色
imagefill($ni, 0, 0, $color); //设置白底
imagecopy($ni,$tm,$bg_x,$bg_y,0,0,$ftoW,$ftoH); //合并图片
imagedestroy($tm);
