---
layout: post
title: snappy压缩工具的PHP拓展版本介绍[译]
date: 2015-07-09 14:34
author: admin
comments: true
categories: []
---
snappy是一个字符串压缩工具，应用挺广泛和便利，下面这个是这个压缩组件的PHP拓展版本。我们有在项目中使用，感觉还是挺不错的一个功能。压缩率大概在50%多。

<strong>下载地址：</strong>

https://github.com/kjdev/php-ext-snappy

下面的解释来自官方github（加了一点翻译，辅助大家理解哈）：

<strong>Build（编译方式）</strong>

phpize

./configure

make

make install
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td>
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</td>
<td></td>
</tr>
</tbody>
</table>
<strong>Configration（配置方式）</strong>
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td>
<div></div>
<div></div></td>
<td>
<div><code>php.ini:</code></div>
<div><code>extension=snappy.so</code></div></td>
</tr>
</tbody>
</table>
<strong>Function : snappy_compress（压缩函数）</strong>
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td>
<div></div>
<div></div></td>
<td>
<div><code>string snappy_compress( string $data )</code></div>
<div><code>parameters</code></div>
<div><code>data:</code></div>
<div><code>The data to compress.</code></div>
<div></div>
<div><code>return</code> <code>values</code></div>
<div></div>
<div><code>//返回被压缩的字符串，如果发生错误，则返回false</code></div>
<div><code>The compressed string or FALSE </code><code>if</code> <code>an error occurred.</code></div></td>
</tr>
</tbody>
</table>
<strong>Function : snappy_uncompress（解压缩函数）</strong>
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td></td>
<td>
<div><code>string snappy_uncompress( string $data )</code></div>
<div><code>parameters</code></div>
<div></div>
<div><code>name:</code></div>
<div><code>//传入的参数：已经被压缩过的“特殊字符”</code></div>
<div><code>The data compressed by snappy_gzcompress().</code></div>
<div></div>
<div><code>return</code> <code>values</code></div>
<div><code>//返回未压缩前的字符串，如果发生错误，则发挥false</code></div>
<div><code>The original uncompressed data or FALSE on error.</code></div></td>
</tr>
</tbody>
</table>
<strong>Example（例子）</strong>
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td></td>
<td>
<div><code>$compressed = snappy_compress(</code><code>'Compress me'</code><code>);</code></div>
<div></div>
<div><code>$uncompressed = snappy_uncompress($compressed);</code></div>
<div></div>
<div><code>echo $uncompressed;</code></div></td>
</tr>
</tbody>
</table>
<strong>pdf&amp;html快照的压缩功能</strong>

Snappy is a PHP5 library allowing thumbnail, snapshot or PDF generation from a url or a html page. It uses the excellent webkit-based <a href="http://wkhtmltopdf.org/" target="_blank" rel="nofollow">wkhtmltopdf and wkhtmltoimage</a>available on OSX, linux, windows.

You will have to download wkhtmltopdf 0.12.x in order to use Snappy.

Snappy是一个PHP5功能库，允许从一个URL或HTML形成缩略图、PDF和快照。它采用基于<a href="http://wkhtmltopdf.org/" target="_blank" rel="nofollow">wkhtmltopdf and wkhtmltoimage</a>，在OSX，Linux，Windows等系统上可用。你必须下载wkhtmltopdf 0.12。x才可以使用Snappy。

https://github.com/knplabs/snappy

require_once '/path/to/snappy/src/autoload.php';
use Knp\Snappy\Pdf;

$snappy = new Pdf('/usr/local/bin/wkhtmltopdf');

// or you can do it in two steps （或者你可以使用2个步骤来完成）
$snappy = new Pdf();
$snappy-&gt;setBinary('/usr/local/bin/wkhtmltopdf');

// Display the resulting pdf in the browser（在浏览器中展示PDF文件的结果）
// by setting the Content-type header to pdf（通过设置HTTP协议的Content-type头来展示PDF）
$snappy = new Pdf('/usr/local/bin/wkhtmltopdf');
header('Content-Type: application/pdf');
header('Content-Disposition: attachment; filename="file.pdf"');
echo $snappy-&gt;getOutput('http://www.github.com');
