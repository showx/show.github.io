---
layout: post
title: redis set集合
date: 2015-07-14 11:32
author: admin
comments: true
categories: []
---
常用命令：
redis 127.0.0.1:6379> flushdb
OK
redis 127.0.0.1:6379> select 0 
OK
redis 127.0.0.1:6379> clear 

# 第一中string类型 set get del  查询复杂度是O(1)  
redis 127.0.0.1:6379>  set name wxh 
OK
redis 127.0.0.1:6379> get name
"wxh"
redis 127.0.0.1:6379> del name
(integer) 1
redis 127.0.0.1:6379> get name
(nil)
总结：set name wxh = set name "wxh" 本身字符串类型 无所谓引号

# 第二种：set 集合类型 （注意一点:set集合里没有唯一,不能有重复值.插入重复值默认忽略）
Set可包含的最大元素数量是4294967295
redis 127.0.0.1:6379> sadd english a b c d e f g        #增加set集合名为english 元素为a b c d e f g 
(integer) 7
redis 127.0.0.1:6379> sadd english a b c d e f g       #再次增加同样失效，证明不能有重复
(integer) 0
redis 127.0.0.1:6379> sadd english h i   # 再次添加新元素 OK
(integer) 2
redis 127.0.0.1:6379> SMEMBERS english  # 显示元素 
1) "c"
2) "d"
3) "e"
4) "f"
5) "g"
6) "h"
7) "a"
8) "b"
9) "i"
redis 127.0.0.1:6379> SCARD english #查看元素个数
(integer) 9
redis 127.0.0.1:6379> SISMEMBER english b  #查看b是不是元素成员
(integer) 1
redis 127.0.0.1:6379> del english  #删除set集合 english
(integer) 1
redis 127.0.0.1:6379> sadd english a b c d e f g   #增加set 集合english
(integer) 7
redis 127.0.0.1:6379> SRANDMEMBER english #随机选出来一个元素
"d"
redis 127.0.0.1:6379> SRANDMEMBER english #随机选出来一个元素
"b"
redis 127.0.0.1:6379> 
redis 127.0.0.1:6379> SMEMBERS english #显示所有元素
1) "c"
2) "d"
3) "e"
4) "f"
5) "g"
6) "a"
7) "b"
redis 127.0.0.1:6379> SPOP english #尾部删除一个
"b"
redis 127.0.0.1:6379> SMEMBERS english #显示所有元素
1) "c"
2) "d"
3) "e"
4) "f"
5) "g"
6) "a"
redis 127.0.0.1:6379> SREM english a g f  #删除某几个元素
(integer) 3
redis 127.0.0.1:6379> SMEMBERS english #显示 
1) "c"
2) "d"
3) "e"
redis 127.0.0.1:6379> SADD china one two three #新建一个set
(integer) 3
redis 127.0.0.1:6379> SMOVE china english one #移动 从某个集合移动到某个集合 + 需要移动的元素
(integer) 1
redis 127.0.0.1:6379> SMEMBERS english #显示
1) "c"
2) "d"
3) "e"
4) "one"
redis 127.0.0.1:6379> SMEMBERS china #显示
1) "three"
2) "two"

redis 127.0.0.1:6379> SMEMBERS niao #显示
1) "1"
2) "2"
3) "3"
4) "4"
redis 127.0.0.1:6379> SMEMBERS bear #显示
1) "1"
2) "2"
3) "5"
4) "8"
redis 127.0.0.1:6379> SDIFF niao bear #显示niao集合中和bear不一致的元素
1) "3"
2) "4"
redis 127.0.0.1:6379> SDIFFSTORE dazui niao bear #保存不一致的元素 （相当于取左边集合和右边集合不同的放入新集合中）
(integer) 2
redis 127.0.0.1:6379> SMEMBERS dazui #显示
1) "3"
2) "4"
redis 127.0.0.1:6379> SINTER niao bear #类似mysql innter join
1) "1"
2) "2"
redis 127.0.0.1:6379> SINTERSTORE dazui niao bear #保存到新集合
(integer) 2
redis 127.0.0.1:6379> SMEMBERS dazui #显示
1) "1"
2) "2"
