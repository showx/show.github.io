---
layout: post
title: jquery中select下拉框按首字母或拼音筛选
date: 2015-07-17 17:16
author: admin
comments: true
categories: []
---
<html>
<head>
    <title>列表筛选</title>
<script type="text/javascript" src="jQuery19.js"></script>
<script type="text/javascript" ></script>
<script type="text/javascript" >
function filteroption(root) {  //初始化列表，参数为列表id
    var tempul;
    tempul = $("#" + root).clone(true);
    tempul.children().each(function() {
        var htmword = $(this).html();
        var pyword = $(this).toPinyin();
        var supperword = "";
        pyword.replace(/[A-Z]/g, function(word) { supperword += word });
        $(this).attr("mka", (htmword).toLowerCase());
        $(this).attr("mkb", (pyword).toLowerCase());
        $(this).attr("mkc", (supperword).toLowerCase());
    });
    window[root] = tempul;
}
//筛选符合的列表项
function resetOption(keys, root) {
    keys = keys.toLowerCase();
    $("#" + root).children().remove();
    var duplul = $(window[root]);
    if (keys.length <= 0) {
        duplul.children().each(function() {
        $("#" + root).append($(this).clone(true).removeAttr("mka").removeAttr("mkb").removeAttr("mkc")); 
        });
        return;
    }
    duplul.children('[mka*="' + keys + '"],[mkb*="' + keys + '"],[mkc*="' + keys + '"]').each(function() {
    $("#" + root).append($(this).clone(true).removeAttr("mka").removeAttr("mkb").removeAttr("mkc"));
    });
}
</script>
 
    <script type="text/javascript">
        $(document).ready(function() {
            filteroption("ullist"); //初始化列表,参数为ul或者select的id
            filteroption("sellist");
        });
        function search() {
            resetOption($.trim($("#txt_search").val()), "ullist");  //搜索时调用的方法，参数为关键字内容和ul或者select的id
        }
        
    </script>
</head>
<body>
    拼音、首字母、汉字：<input type="text" id="txt_search" />
    <input type="button" id="btn_search" onclick="search()" value="UlSearch" />
    <ul id="ullist">
        <li>我是女生</li>
        <li>我是女神</li>
        <li>可爱的女生</li>
        <li>昨夜的雨一直下着</li>
        <li>从此只有孤独寂寞陪伴着我</li>
        <li>看着你消失在我的视线</li>
        <li>一生一世和你相偎相依</li>
        <li>如果还有那么一天</li>
        <li>老天能让我和你相恋</li>
    </ul>
    
    拼音、首字母、汉字：<input type="text" id="txt_sel_search" />
    <input type="button" id="btn_sel_search" onclick='resetOption($.trim($("#txt_sel_search").val()), "sellist")' value="SelectSearch" />
    <p>
    <select id="sellist" multiple="multiple" style=" height:150px;">
        <option>我们之间没有延伸的关系</option>
        <option>只在黎明混着夜色时</option>
        <option>才有浅浅重叠的片刻</option>
        <option>不懂那月亮的盈缺</option>
        <option>像白天不懂夜的黑</option>
        <option>你永远不懂我伤悲</option>
        <option>像永恒燃烧的太阳</option>
        <option>不懂那星星为何会坠跌</option>
        <option>我们仍坚持各自等在原地</option>
    </select>
    </p>
</body>
</html>
