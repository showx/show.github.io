---
layout: post
title: 小玩微信小程序
date: 2017-04-05 14:54
author: admin
comments: true
categories: [Uncategorized]
---
上周玩了两三晚微信小程序，开发了一个简单事例：

官方文档：https://mp.weixin.qq.com/debug/wxadoc/dev/index.html?t=2017327

首先当然是注册一个小程序的号，然后下载个小程序微信开发。

小程序里面提供了一套mvc的架构，按照架构就可以开发了，很容易理解。

值得注意的是页面是使用html+css..但js未必是jquery的，里面提供了一套api.

例如发起请求：wx.request(OBJECT)
<pre><code class="lang-javascript">wx.request({
  url: <span class="hljs-string">'test.php'</span>, <span class="hljs-comment">//仅为示例，并非真实的接口地址</span>
  data: {
     x: <span class="hljs-string">''</span> ,
     y: <span class="hljs-string">''</span>
  },
  header: {
      <span class="hljs-string">'content-type'</span>: <span class="hljs-string">'application/json'</span>
  },
  success: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
    <span class="hljs-built_in">console</span>.log(res.data)
  }
})
</code></pre>
但和服务端通通一定要使用https,这里硬规定，现在的app很多都走https了，更安全吧。

使用https,避免明文被窃听。

申请好https之后，如果是nginx,加多一个server即可， 不影响之前的配置。

server {
listen 443;
server_name www.anyway.cn;

//https开启
ssl on;
ssl_certificate /ddd/cert/1_www.anyway.cn_bundle.crt;
ssl_certificate_key /ddd/cert/2_www.anyway.cn.key;
ssl_session_timeout 5m;
ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;
ssl_prefer_server_ciphers on;

}

审核大概两天的时间就差不多了，但是提交的版本，你发了最新版本，也只能按提交时候的版本来审核。

现在看了一下统计，每也也有一些用户递增，那就足够了，有兴趣，可以添加『手机归属地』体验一下。
