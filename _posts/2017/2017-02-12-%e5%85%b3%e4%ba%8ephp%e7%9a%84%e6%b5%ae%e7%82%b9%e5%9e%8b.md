---
layout: post
title: 关于php的浮点型
date: 2017-02-12 13:47
author: admin
comments: true
categories: [Uncategorized]
---
最型又折腾浮点型的问题，要不保留两位小数，要不保留三位小数。

公司的计算又得用上，例如安装是月总110,剩以2.6等于 286 ，但每天类加可能不一样，因为有些天数金额为2.8666666,所以计算数据要确保保留几位，要不要四舍五入，例如.10/6=1.666666666   保留两位四舍五入为 1.67 ，这个根据业务，可以为1.66。

在php中有比较好的计算函数bc:
<ul class="ul1">
 	<li class="li1"><span class="s1"><a href="file:///Users/show/Library/Application%20Support/Dash/DocSets/PHP/PHP.docset/Contents/Resources/Documents/php.net/manual/en/function.bcadd.html"><span class="s2">bcadd</span></a></span><span class="s3"> — Add two arbitrary precision numbers</span></li>
 	<li class="li1"><span class="s4"><a href="file:///Users/show/Library/Application%20Support/Dash/DocSets/PHP/PHP.docset/Contents/Resources/Documents/php.net/manual/en/function.bccomp.html"><span class="s2">bccomp</span></a></span><span class="s3"> — Compare two arbitrary precision numbers</span></li>
 	<li class="li1"><span class="s4"><a href="file:///Users/show/Library/Application%20Support/Dash/DocSets/PHP/PHP.docset/Contents/Resources/Documents/php.net/manual/en/function.bcdiv.html"><span class="s2">bcdiv</span></a></span><span class="s3"> — Divide two arbitrary precision numbers</span></li>
 	<li class="li1"><span class="s4"><a href="file:///Users/show/Library/Application%20Support/Dash/DocSets/PHP/PHP.docset/Contents/Resources/Documents/php.net/manual/en/function.bcmod.html"><span class="s2">bcmod</span></a></span><span class="s3"> — Get modulus of an arbitrary precision number</span></li>
 	<li class="li1"><span class="s4"><a href="file:///Users/show/Library/Application%20Support/Dash/DocSets/PHP/PHP.docset/Contents/Resources/Documents/php.net/manual/en/function.bcmul.html"><span class="s2">bcmul</span></a></span><span class="s3"> — Multiply two arbitrary precision numbers</span></li>
 	<li class="li1"><span class="s4"><a href="file:///Users/show/Library/Application%20Support/Dash/DocSets/PHP/PHP.docset/Contents/Resources/Documents/php.net/manual/en/function.bcpow.html"><span class="s2">bcpow</span></a></span><span class="s3"> — Raise an arbitrary precision number to another</span></li>
 	<li class="li1"><span class="s4"><a href="file:///Users/show/Library/Application%20Support/Dash/DocSets/PHP/PHP.docset/Contents/Resources/Documents/php.net/manual/en/function.bcpowmod.html"><span class="s2">bcpowmod</span></a></span><span class="s3"> — Raise an arbitrary precision number to another, reduced by a specified modulus</span></li>
 	<li class="li1"><span class="s4"><a href="file:///Users/show/Library/Application%20Support/Dash/DocSets/PHP/PHP.docset/Contents/Resources/Documents/php.net/manual/en/function.bcscale.html"><span class="s2">bcscale</span></a></span><span class="s3"> — Set default scale parameter for all bc math functions</span></li>
 	<li class="li1"><span class="s4"><a href="file:///Users/show/Library/Application%20Support/Dash/DocSets/PHP/PHP.docset/Contents/Resources/Documents/php.net/manual/en/function.bcsqrt.html"><span class="s2">bcsqrt</span></a></span><span class="s3"> — Get the square root of an arbitrary precision number</span></li>
 	<li class="li1"><span class="s4"><a href="file:///Users/show/Library/Application%20Support/Dash/DocSets/PHP/PHP.docset/Contents/Resources/Documents/php.net/manual/en/function.bcsub.html"><span class="s2">bcsub</span></a></span><span class="s3"> — Subtract one arbitrary precision number from another</span></li>
</ul>
&nbsp;

还有些特殊情况的：
<pre>$price=69.1;
$count=100;
$total=$price*$count-6910;</pre>
代码输出：-9.09494701773E-13
怎么解决这个问题呢？
使用round函数
代码修改成

$total=round($price*$count)-6910;
//还可以修改为
$c = $a-"$b"; //来解决

浮点数，因为是二制进计算，所以这不是bug,就是这样了。
