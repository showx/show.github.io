---
layout: post
title: es promise的理解
date: 2017-10-23 06:41
author: admin
comments: true
categories: [Uncategorized]
---
<pre>function a(cb){
   $.ajax({
      success(rs){

          cb(rs);
      }
   })
}

function b(param,cb){
   $.ajax({
      success(rs){
          cb(rs);
      }
   })
}

function c(param){
   console.log(param);
}

//场景 执行a后拿到结果执行b，拿到结果再执行c

//原始方式
a(function(rs){
   b(rs,function(rs2){
      c(rs2)
   })
})



//用promise方式
function a(){
   return new Promise((resolve,reject)=&gt;{
      $.ajax({
         success(rs){
            console.log("1");
            resolve(rs);
         },
         error(){
         reject(e)
         }
      })
   })
}

function b(param){
   return new Promise((resolve,reject)=&gt;{
      $.ajax({
         success(rs){
            resolve(rs);
         }
      })
   })
}

function c(param){
   console.log(param);
}

//执行
a().then(rs=&gt;{
   b(rs).then(rs2=&gt;{
      c(rs2);
   },{

   })
})


//用async await 方式
(async function xx(){
   let rs = await a();
   let rs2 = await b(rs);
   c(rs2);
})()


(function(){
   sdfsdf
   xOP
   sdfdf
})()




</pre>
