---
layout: post
title: PHP教程四/PHP中__clone克隆的用法
date: 2010-08-29 07:52
author: admin
comments: true
categories: []
---
相信大家都知道克隆这个词，在前两年这个词比较的热门，没想到在PHP中也有克隆吧，PHP中的克隆是使用__clone方法来实现克隆方法和属性的。在PHP5中的对象模型通过引用来调用对象, 但有时你可能想建立一个对象的副本,并希望原来的对象的改变不影响到副本。为了这样的目的,PHP定义了一个特殊的方法,称为__clone.。像构造函数（__construct）和析构函数（__destruct）一样,前面有两个下划线.
用__clone方法将建立一个与原对象拥有相同属性和方法的对象. 如果你想在克隆时改变默认的内容,你要在__clone中覆写(属性或方法)。
克隆的方法可以没有参数,但它同时包含this和that指针(that指向被复制的对象).
我们可以看看下面的例子，来加深我们对<a href="http://www.wljcz.com/">克隆</a>的理解，一个用系列序数来自动化对象的例子，如下:
<pre>
	<li>&lt;?php</li>
	<li>　　 class ObjectTracker //对象跟踪器</li>
	<li>　　 {</li>
	<li>　　　　 private static $nextSerial = 0;</li>
	<li>　　　　 private $id;</li>
	<li>　　　　 private $name;</li>
	<li>　　　　　 function __construct($name) //构造函数</li>
	<li>　　　　 {</li>
	<li>　　　　　　 $this-&gt;name = $name;</li>
	<li>　　　　　　 $this-&gt;id = ++self::$nextSerial;</li>
	<li>　　　　 }</li>
	<li>　　　　　 function __clone()　//克隆</li>
	<li>　　　　 {</li>
	<li>　　　　　　 $this-&gt;name = "Clone of $that-&gt;name";</li>
	<li>　　　　　　 $this-&gt;id = ++self::$nextSerial;</li>
	<li>　　　　 }</li>
	<li>　　　　　 function getId() //获取id属性的值</li>
	<li>　　　　 {</li>
	<li>　　　　　　 return($this-&gt;id);</li>
	<li>　　　　 }</li>
	<li>　　　　　 function getName() //获取name属性的值</li>
	<li>　　　　 {</li>
	<li>　　　　　　 return($this-&gt;name);</li>
	<li>　　　　 }</li>
	<li>　　 }</li>
	<li>　　　 $ot = new ObjectTracker("Zeev's Object");</li>
	<li>　　 $ot2 = $ot-&gt;__clone();</li>
	<li>　　　 //输出: 1 Zeev's Object</li>
	<li>　　 print($ot-&gt;getId() . " " . $ot-&gt;getName() . "&lt;br&gt;");</li>
	<li>　　　 //输出: 2 Clone of Zeev's Object</li>
	<li>　　 print($ot2-&gt;getId() . " " . $ot2-&gt;getName() . "&lt;br&gt;");</li>
	<li>?&gt;??</li>
</pre>
本文由网络教程站（<a href="http://www.wljcz.com/">http://www.wljcz.com</a>）整理发布！转载请注明出处，谢谢！
