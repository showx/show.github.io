

<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
      
    --- - shengsheng的博客
    
    </title>
    
    
    
    <link href="atom.xml" rel="alternate" title="shengsheng的博客" type="application/atom+xml">
    <link rel="stylesheet" href="asset/style.css">
    
</head>
  <body>




        <div id="wrapper">
            <header class="site-header">
                <div class="container">
                    <div class="site-title-wrapper">
                          <a class="button-square" href="index.html">
<svg class="svg-inline--fa fa-home fa-w-18" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="home" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" data-fa-i2svg=""><path fill="currentColor" d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"></path></svg>
                            </a>
                        
                         
                        
                        
                        
                        <a class="button-square" href="https://github.com/showx" target="_blank" title="github">
                               <svg class="svg-inline--fa fa-github fa-w-16" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" data-fa-i2svg=""><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><!-- <i class="fab fa-github fa-lg"></i> -->
                          </a>
                        
                        
                      
                      <a class="button-square" href="atom.xml" target="_blank" title="RSS">
                              <svg class="svg-inline--fa fa-rss fa-w-14" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"></path></svg><!-- <i class="fas fa-rss fa-lg"></i> -->
                      </a>

              
                       
                         
                        
                    </div>

                    <ul class="site-nav">
                        
                    </ul>
                </div>
            </header>

            <div id="container">

 
<div class="container">
  <article class="post-container">
    <header class="post-header">
        <h1 class="post-title">---</h1>
        <p class="post-date">
                <span>Posted <time datetime="2020/02/06" itemprop="datePublished">2020/02/06</time></span>
            </p>
    </header>

    <div class="post-content clearfix">
<p>layout: post<br/>
title: 在Mac OS X中配置Apache ＋ PHP ＋ MySQL<br/>
date: 2013-07-31 19:56<br/>
author: admin<br/>
comments: true</p>

<h2 id="toc_0">categories: []</h2>

<p>Mac OS X 内置Apache 和 PHP，使用起来非常方便。本文以Mac OS X 10.6.3和<ins datetime="2012-08-30T14:34:02+08:00"> 10.8.1</ins>为例。主要内容包括：<br/>
<ol><br/>
    <li><a href="http://dancewithnet.com/2010/05/09/run-apache-php-mysql-in-mac-os-x/#apache">启动Apache</a></li><br/>
    <li><a href="http://dancewithnet.com/2010/05/09/run-apache-php-mysql-in-mac-os-x/#php">运行PHP</a></li><br/>
    <li><a href="http://dancewithnet.com/2010/05/09/run-apache-php-mysql-in-mac-os-x/#mysql">安装MySQL</a></li><br/>
    <li><a href="http://dancewithnet.com/2010/05/09/run-apache-php-mysql-in-mac-os-x/#phpmyadmin">使用phpMyAdmin</a></li><br/>
    <li><a href="http://dancewithnet.com/2010/05/09/run-apache-php-mysql-in-mac-os-x/#mcrypt">配置PHP的MCrypt扩展库</a></li><br/>
    <li><a href="http://dancewithnet.com/2010/05/09/run-apache-php-mysql-in-mac-os-x/#virtualhost">设置虚拟主机</a></li><br/>
</ol><br/>
<h3 id="apache">启动Apache</h3><br/>
有两种方法：<br/>
<ol><br/>
    <li>打开“系统设置偏好（System Preferences）” -&gt; “共享（Sharing）” -&gt; “Web共享（Web Sharing）”。<ins datetime="2012-08-30T14:34:02+08:00">注意，从Mac OS X从10.8开始取消了 “Web共享（Web Sharing）”。</ins></li><br/>
    <li>打开“终端（terminal）”，然后（注意，sudo需要的密码就是系统的root帐号密码）<br/>
<ol><br/>
    <li>运行“<code>sudo apachectl start</code>”，再输入帐号密码，这样Apache就运行了。</li><br/>
    <li>运行“<code>sudo apachectl －v</code>”，你会看到Mac OS X的Apache版本信息，如10.8.1中：<br/>
<pre><code>Server version: Apache/2.2.22 (Unix)<br/>
Server built:   Jun 20 2012 13:57:09<br/>
</code></pre><br/>
</li><br/>
</ol><br/>
</li><br/>
</ol><br/>
如此在浏览器中输入“http://localhost”，就可以看到一个内容为“It works!”的页面，其位于“/Library（资源库）/WebServer/Documents/”下，这就是Apache的默认根目录。</p>

<p>&nbsp;</p>

<p>注意：开启了Apache就是开启了“Web共享”，这时联网用户就会通过“http://[本地IP]/”来访问“/Library（资源库）/WebServer/Documents/”目录，通过“http://[本地IP]/~[用户名]”来访问“/Users/[用户名]/Sites/”目录。<ins datetime="2012-08-30T14:34:02+08:00">值得注意的是，Mac OS X在10.8中取消”Web共享（Web Sharing）”时，也移除了“/Users/[用户名]/Sites/”目录，所以10.8中访问“http://[本地IP]/~[用户名]”会显示“403 Forbidden”，但http://[本地IP]/依旧可以访问。</ins>可以到“系统偏好设置” -&gt; “安全（Security）” -&gt; “防火墙（Firewall）”，开启防火墙，然后在“防火墙选项（Firewall Options）”中勾上“组织所有进入连接（block all incoming connections）”即可。也可以通过设置httpd.conf来只允许localhost和127.0.0.1访问“/Library（资源库）/WebServer/Documents/”。<br/>
<pre><code>&lt;Directory &quot;/Library/WebServer/Documents&quot;&gt;<br/>
    ......<br/>
    #<br/>
    # Controls who can get stuff from this server.<br/>
    #<br/>
    Order allow,deny<br/>
    #Allow from all<br/>
    Allow from 127.0.0.1<br/>
    Allow from localhost </p>

<p>&lt;/Directory&gt;<br/>
</code></pre><br/>
<h3 id="php">运行PHP</h3><br/>
<ol><br/>
    <li>在终端中运行“<code>sudo vi /etc/apache2/httpd.conf</code>”，打开Apache的配置文件。（如果不习惯操作终端和vi，可以设置<a href="http://apple.tgbus.com/tutorial/soft/200811/20081125100105.shtml">在Finder中显示所有系统隐藏文件</a>，记得设置完毕后需要<a href="http://www.macdocks.com/2009/07/14/mac-tips-%E4%B8%89%E7%A7%8D%E6%96%B9%E6%B3%95%E9%87%8D%E5%90%AFmac-os-x-finder/">重启Finder</a>，然后就可以找到对应文件，随心所欲编辑了，需要注意的是某些文件的修改还是需要<a href="http://support.apple.com/kb/HT1528?viewlocale=zh_CN">开启root帐号</a>，但整体上还是在终端上使用<code>sudo</code>来临时获取root权限比较安全。）</li><br/>
    <li>找到“<code>#LoadModule php5_module libexec/apache2/libphp5.so</code>”，把前面的#号去掉，保存（在命令行输入<code>:w</code>）并退出vi（在命令行输入<code>:q</code>）。</li><br/>
    <li>运行“<code>sudo cp /etc/php.ini.default /etc/php.ini</code>”，这样就可以运行<code>sudo vi /etc/php.ini</code>来编辑php.ini配置各种功能了。比如：<br/>
<pre><code>;通过下面两项来调整PHP提交文件的最大值，如phpMyAdmin中导入数据的最大值<br/>
upload_max_filesize = 2M<br/>
post_max_size = 8M<br/>
;通过display_errors来控制是否显示PHP程序的报错信息，这在调试PHP程序时非常有用<br/>
display_errors = Off<br/>
</code></pre><br/>
</li><br/>
    <li>运行“<code>sudo apachectl restart</code>”，重启Apache，这样PHP就可以用了。</li><br/>
    <li>运行“<code>sudo cp /Library/WebServer/Documents/index.html.en /Library/WebServer/Documents/info.php</code>”，即在Apache的根目录下复制index.html.en文件并重命名为info.php。</li><br/>
    <li>在终端中运行“<code>sudo vi /Library/WebServer/Document/info.php</code>”，这样就可以在vi中编辑info.php文件了。在“It’s works!”后面加上“<code>&lt;?php phpinfo(); ?&gt;</code>”，然后保存之。如此就可以在http://localhost/info.php中看到有关PHP的信息，比如10.8中内置PHP版本号是5.3.13。</li><br/>
</ol><br/>
<h3 id="mysql">安装MySQL</h3><br/>
Mac OS X没有内置MySQL，所以需要自己手动安装，目前MySQL的最稳定版本是5.5。<a href="http://dev.mysql.com/doc/refman/5.5/en/macosx-installation.html">MySQL提供了Mac OS X下的安装说明</a>。<br/>
<ol><br/>
    <li><a href="http://dev.mysql.com/downloads/mysql/5.5.html">下载MySQL 5.5</a>。选择合适版本，如这里选择了mysql-5.5.27-osx10.6-x86_64.dmg。</li><br/>
    <li>运行dmg，会发现里面有4个文件。首先点击安装mysql-5.5.27-osx10.6-x86_64.pkg，这是MySQL主安装包。一般情况下，安装文件会自动把MySQL安装到<code>/usr/local</code>下的同名文件夹下。如运行“<code>mysql-5.5.27-osx10.6-x86_64.dmg</code>”会把MySQL安装到“<code>/usr/local/mysql-5.5.27-osx10.6-x86_64</code>”中，一路默认安装完毕。（注意，从10.8开始Mac OS X的权限更加严格，直接点击会提示“mysql-5.5.27-osx10.6-x86_64.pkg can’t be opened because it is from an unidentified developer. Your security preferences allow installation of only apps from the Mac App Store and identified developers.”阻止了安装，你可以使用双指单击该安装文件，在弹出菜单中选择“用…打开（open with）”，再选择“安装（Installer）”就可以接着安装了。）</li><br/>
    <li>安装第2个文件MySQLStartupItem.pkg，MySQL就会自动在开机时启动了。（注意，10.8的安装方法同上。）</li><br/>
    <li>安装第3个文件MySQL.prefPane，就会在“系统设置偏好”中看到“MySQL”的ICON，通过它就可以控制MySQL是否开启，以及开机时是否自动运行。到这里MySQL就基本安装完毕了。（注意，10.8中用双指单击该安装文件，在弹出的菜单中选择“用…打开（open with）”，然后选择“系统偏好（System Perference）”就可以接着安装了。）</li><br/>
    <li>通过运行“<code>sudo vi /etc/bashrc</code>”，在bash配置文件中加入<code>mysqlstart</code>、<code>mysql</code>和<code>mysqladmin</code>的别名（注意：修改完毕之后需要退出“终端（Terminal）”之后重新进入，这些命令才会生效）：<br/>
<pre><code>#mysql<br/>
alias mysqlstart=&#39;sudo /Library/StartupItems/MySQLCOM/MySQLCOM restart&#39;<br/>
alias mysql=&#39;/usr/local/mysql/bin/mysql&#39;<br/>
alias mysqladmin=&#39;/usr/local/mysql/bin/mysqladmin&#39;<br/>
</code></pre><br/>
这样就可以在终端中比较简单地通过命令进行相应的操作。由于开始安装MySQLStartupItem.pkg到“<code>/Library/StartupItems/MySQLCOM/</code>”来控制MySQL的运行、自动运行、停止、关闭之类。在MySQL没有启动时，直接运行<code>mysql</code>或<code>mysqladmin</code>命令会提示“<code>Can&#39;t connect to local MySQL server through socket &#39;/tmp/mysql.sock&#39; (2)</code>”，所以我们可以通过控制面板或者直接运行<code>mysqlstart</code>命令来启动MySQL，之后再运行<code>mysql</code>或<code>mysqladmin</code>命令就正常了。比如安装完毕后MySQL的<code>root</code>默认密码为空，如果要设置密码可以在终端运行“<code>mysqladmin -u root password &quot;mysqlpassword&quot;</code>”来设置，其中mysqlpassword即root的密码。更多相关内容可以参考<a href="http://dev.mysql.com/doc/refman/5.5/en/resetting-permissions.html">B.5.4.1. How to Reset the Root Password</a>。</li><br/>
</ol><br/>
注意：Mac OS X的升级或其他原因可能会导致ＭySQL启动或开机自动运行时，在ＭySQL操作面板上会提示“<code>Warning:The /usr/local/mysql/data directory is not owned by the &#39;mysql&#39; or &#39;_mysql&#39; </code>”，这应该是某种情况下导致<code>/usr/local/mysql/data</code>的宿主发生了改变，只需要运行“<code>sudo chown -R mysql /usr/local/mysql/data</code>”即可。</p>

<p>另外，<a href="http://www.exp2up.com/2009/03/11/mac%E4%B8%8A%E7%9A%84php%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5mysql/">使用PHP连接MySQL可能会报错</a>“Can’t connect to local MySQL server through socket ‘/var/mysql/mysql.sock’”，或使用localhost无法连接MySQL而需要127.0.0.1，原因是连接时php默认去找<code>/var/mysql/mysql.sock</code>了，但MAC版的MYSQL改动了文件位置，放在/tmp下了。处理办法是按如下修改php.ini：<br/>
<pre><code>mysql.default_socket = /tmp/mysql.sock</code></pre><br/>
<h3 id="phpmyadmin">使用phpMyAdmin</h3><br/>
<a href="http://www.phpmyadmin.net/">phpMyAdmin</a>是用PHP开发的管理MySQL的程序，非常的流行和实用。能够使用phpMyAdmin管理MySQL是检验前面几步效果的非常有效方式。<br/>
<ol><br/>
    <li><a href="http://www.phpmyadmin.net/home_page/downloads.php">下载phpMyAdmin</a>。选择合适的版本，比如这里选择phpMyAdmin-3.5.22-all-languages.tar.bz2这个版本。</li><br/>
    <li>把“下载（downloads）”中phpMyAdmin-3.5.22-all-languages.tar.bz2文件解压到“<code>/Library/WebServer/Documents/</code>”中，并改名为phpmyadmin。<br/>
<pre><code>sudo tar -xf ~/Downloads/phpMyAdmin-3.5.2.2-all-languages.tar.bz2 -C<br/>
             /Library/WebServer/Documents/<br/>
sudo mv /Library/WebServer/Documents/phpMyAdmin-3.5.2.2-all-languages<br/>
            /Library/WebServer/Documents/phpmyadmin<br/>
</code></pre><br/>
</li><br/>
    <li>复制“<code>/Library/WebServer/Documents/phpmyadmin/</code>”中的config.sample.inc.php，并命名为config.inc.php</li><br/>
    <li>编辑config.inc.php，修改如下：<br/>
<pre><code>用于Cookie加密，随意的长字符串<br/>
$cfg[&#39;blowfish_secret&#39;] = &#39;a8b7c6d&#39;;</p>

<p>当phpMyAdmin中出现“#2002 无法登录 MySQL 服务器（#2002 Cannot log in to the MySQL server）”时，<br/>
<a href="http://achan.me/2010/04/mysql-error-2002.html">请把localhost改成127.0.0.1就ok了</a>，<br/>
这是因为MySQL守护程序做了IP绑定（bind-address =127.0.0.1）造成的<br/>
\(cfg[&#39;Servers&#39;][\)i][&#39;host&#39;] = &#39;localhost&#39;;</p>

<p>把false改成true，这样就可以访问无密码的MySQL了，<br/>
即使MySQL设置了密码也可以这样设置，然后登录phpMyAdmin时输入密码<br/>
\(cfg[&#39;Servers&#39;][\)i][&#39;AllowNoPassword&#39;] = false;<br/>
</code></pre><br/>
</li><br/>
    <li>这样就可以通过<code>http://localhost/phpmyadmin</code>访问phpMyAdmin了。此时会看到一个提示“无法加载 mcrypt 扩展，请检查您的 PHP 配置。（The mcrypt extension is missing. Please check your PHP configuration.）”，这会涉及到下一节安装MCrypt扩展了。</li><br/>
</ol><br/>
<h3 id="mcrypt">配置PHP的MCrypt扩展</h3><br/>
<a href="http://mcrypt.sourceforge.net/">MCrypt</a>是一个功能强大的加密算法扩展库，它包括有22种算法，phpMyAdmin依赖这个PHP扩展库。但在Mac OS X下的安装却不那么友善，具体如下：<br/>
<ol><br/>
    <li>下载<a href="http://sourceforge.net/projects/mcrypt/files/Libmcrypt/">libmcrypt-2.5.8.tar.gz</a>。</li><br/>
    <li>在终端执行如下命令（注意如下命令需要安装<a href="http://developer.apple.com/xcode/">Xcode</a>支持，可直接去Mac App Store下载，安装完毕后可能会发现在终端运行<code>./configure --disable-posix-threads --enable-static</code>会报错，运行<code>make</code>会提示命令不存在，此时还需要打开Xcode，然后在Xcode的软件“配置（Preference…）”）-&gt; “下载（Downloads）” 中安装 “命令行工具（Command Line Tools）”：<br/>
<pre><code>cd ~/Downloads<br/>
tar -zxvf libmcrypt-2.5.8.tar.bz2<br/>
cd libmcrypt-2.5.8<br/>
./configure --disable-posix-threads --enable-static<br/>
make<br/>
sudo make install</code></pre><br/>
</li><br/>
    <li>下载<a href="http://us2.php.net/get/php-5.3.13.tar.bz2/from/a/mirror">PHP源码文件php-5.3.13.tar.bz2</a>，记得选择中国镜像会比较快。Mac OS X 10.6.3中预装的PHP版本是5.3.1，10.8的版本是5.3.13，而现在<a href="http://us2.php.net/downloads.php">最新的PHP版本是5.4.6</a>，所以需要依据自己的实际情况选择对应的版本，本文以10.8的PHP版本为例。</li><br/>
    <li>在终端执行如下命令，把php-5.3.13.tar.bz2，并<a href="http://www.coolestguyplanettech.com/how-to-install-mcrypt-for-php-on-mac-osx-lion-10-7-development-server/">配置autoconf</a>（在新的Mac OS X的Xcode中需要自己配置），然后才能运行<code>phpize</code>命令：<br/>
<pre><code>cd ~/Downloads<br/>
tar -zxvf php-5.3.13.tar.bz2</p>

<p>cd php-5.3.13/ext/mcrypt<br/>
curl -O <a href="http://ftp.gnu.org/gnu/autoconf/autoconf-latest.tar.gz">http://ftp.gnu.org/gnu/autoconf/autoconf-latest.tar.gz</a><br/>
tar -zxvf autoconf-latest.tar.gz<br/>
cd autoconf-2.69<br/>
./configure<br/>
make<br/>
sudo make install</p>

<p>cd ..<br/>
phpize<br/>
./configure<br/>
make<br/>
sudo make install<br/>
</code></pre><br/>
</li><br/>
    <li>打开php.ini<br/>
<pre><code>sudo vi /etc/php.ini</code></pre><br/>
在php.ini中加入如下代码，并保存后退出，然后重启Apache<br/>
<pre><code>extension=mcrypt.so</code></pre><br/>
</li><br/>
</ol><br/>
当你再访问<code>http://localhost/phpmyadmin</code>时，会发现“无法加载 mcrypt 扩展，请检查您的 PHP 配置。”提示没有了，这就表示MCrypt扩展库安装成功了。如果还不能加载，尝试把php.ini中的加入的<code>extension</code>修改为：<br/>
<pre><code>extension=/usr/lib/php/extensions/no-debug-non-zts-20090626/mcrypt.so</code></pre><br/>
Mac OS X下安装MCrypt扩展的确比较复杂，而且稍微不小心会有各种小问题出现，大家还可以参考<a href="http://www.coolestguyplanettech.com/how-to-install-mcrypt-for-php-on-mac-osx-lion-10-7-development-server/">How to Install mcrypt for php on Mac OSX Lion 10.8 &amp; 10.7 Development Server</a>和<a href="http://remonpel.nl/2012/01/adding-mcrypt-to-your-osx-lion-php-install/">Adding MCRYPT to your OSX Lion PHP install</a><br/>
<h3 id="virtualhost">设置虚拟主机</h3><br/>
<ol><br/>
    <li>在终端运行“<code>sudo vi /etc/apache2/httpd.conf</code>”，打开Apche的配置文件</li><br/>
    <li>在httpd.conf中找到“<code>#Include /private/etc/apache2/extra/httpd-vhosts.conf</code>”，去掉前面的“<code>＃</code>”，保存并退出。</li><br/>
    <li>运行“<code>sudo apachectl restart</code>”，重启Apache后就开启了虚拟主机配置功能。</li><br/>
    <li>运行“<code>sudo vi /etc/apache2/extra/httpd-vhosts.conf</code>”，就打开了配置虚拟主机文件httpd-vhost.conf，配置虚拟主机了。需要注意的是该文件默认开启了两个作为例子的虚拟主机：<br/>
<pre><code>&lt;VirtualHost *:80&gt;<br/>
    ServerAdmin <a href="mailto:webmaster@dummy-host.example.com">webmaster@dummy-host.example.com</a><br/>
    DocumentRoot &quot;/usr/docs/dummy-host.example.com&quot;<br/>
    ServerName dummy-host.example.com<br/>
    ErrorLog &quot;/private/var/log/apache2/dummy-host.example.com-error_log&quot;<br/>
    CustomLog &quot;/private/var/log/apache2/dummy-host.example.com-access_log&quot; common<br/>
&lt;/VirtualHost&gt;</p>

<p>&lt;VirtualHost *:80&gt;<br/>
    ServerAdmin <a href="mailto:webmaster@dummy-host2.example.com">webmaster@dummy-host2.example.com</a><br/>
    DocumentRoot &quot;/usr/docs/dummy-host2.example.com&quot;<br/>
    ServerName dummy-host2.example.com<br/>
    ErrorLog &quot;/private/var/log/apache2/dummy-host2.example.com-error_log&quot;<br/>
    CustomLog &quot;/private/var/log/apache2/dummy-host2.example.com-access_log&quot; common<br/>
&lt;/VirtualHost&gt; </code></pre><br/>
而实际上，这两个虚拟主机是不存在的，在没有配置任何其他虚拟主机时，可能会导致访问localhost时出现如下提示：<br/>
<pre><code>Forbidden<br/>
You don&#39;t have permission to access /index.php on this server</code></pre><br/>
最简单的办法就是在它们每行前面加上#，注释掉就好了，这样既能参考又不导致其他问题。</li><br/>
    <li>增加如下配置<br/>
<pre><code>&lt;VirtualHost *:80&gt;<br/>
    DocumentRoot &quot;/Library/WebServer/Documents&quot;<br/>
    ServerName localhost<br/>
    ErrorLog &quot;/private/var/log/apache2/localhost-error_log&quot;<br/>
    CustomLog &quot;/private/var/log/apache2/localhost-access_log&quot; common<br/>
&lt;/VirtualHost&gt; </p>

<p>&lt;VirtualHost *:80&gt;<br/>
    DocumentRoot &quot;/Users/[用户名]/Sites&quot;<br/>
    ServerName sites<br/>
    ErrorLog &quot;/private/var/log/apache2/sites-error_log&quot;<br/>
    CustomLog &quot;/private/var/log/apache2/sites-access_log&quot; common<br/>
    &lt;Directory /&gt;<br/>
                Options Indexes FollowSymLinks MultiViews<br/>
                AllowOverride None<br/>
                Order deny,allow<br/>
                Allow from all<br/>
      &lt;/Directory&gt;<br/>
&lt;/VirtualHost&gt; </code></pre><br/>
保存退出，并重启Apache。</li><br/>
    <li>运行“<code>sudo vi /etc/hosts</code>”，打开hosts配置文件，加入&quot;<code>127.0.0.1 sites</code>&quot;，这样就可以配置完成sites虚拟主机了，可以访问“http://sites”了，在10.8之前Mac OS X版本其内容和“http://localhost/~[用户名]”完全一致。</li><br/>
    <li>注意，记录log的“<code>ErrorLog &quot;/private/var/log/apache2/sites-error_log&quot;</code>”也可以删掉，但记录日志其实是一个好习惯，在出现问题时可以帮助我们判断。如果保留这些log代码，一定log文件路径都是存在的，如果随便修改一个不存在的，会导致Apache无法服务而没有错误提示，这个比较恶心。</li><br/>
</ol><br/>
这里利用Mac OS X 10.6.3和10.8.1中原生支持的方式来实现的配置，也可以参考“<a href="http://blog.csdn.net/afatgoat/archive/2008/12/26/3615026.aspx">Mac OS X Leopard: 配置Apache, PHP, SQLite, MySQL, and phpMyAdmin(一) </a>”和“<a href="http://blog.csdn.net/afatgoat/archive/2008/12/28/3628710.aspx">Mac OS X Leopard: 配置Apache, PHP, SQLite, MySQL, and phpMyAdmin(二) </a>”。实际上，还可以使用<a href="http://www.apachefriends.org/en/xampp-macosx.html">XAMPP</a>或<a href="http://www.macports.org/">MacPorts</a>这种第三方提供的集成方案来实现简单的安装和使用。</p>

    </div>
    <footer class="post-footer clearfix">
      
           
      
        
    </footer>
     <div class="comments-wrap">
        <div class="share-comments">
          

          

          
        </div>
      </div><!-- end comments wrap -->
  </article>
 </div><!-- end-->



    <footer class="footer">
            <div class="container">
                <div class="site-footer-wrapper">
                        <a class="button-square" href="index.html">
<svg class="svg-inline--fa fa-home fa-w-18" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="home" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" data-fa-i2svg=""><path fill="currentColor" d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"></path></svg>
                            </a>
                        
                         
                        
                        
                        
                        <a class="button-square" href="https://github.com/showx" target="_blank" title="github">
                               <svg class="svg-inline--fa fa-github fa-w-16" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" data-fa-i2svg=""><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><!-- <i class="fab fa-github fa-lg"></i> -->
                          </a>
                        
                        
                      
                      <a class="button-square" href="atom.xml" target="_blank" title="RSS">
                              <svg class="svg-inline--fa fa-rss fa-w-14" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"></path></svg><!-- <i class="fas fa-rss fa-lg"></i> -->
                      </a>

              
                       
                                                
                </div>
                <div class="site-menu-wrapper">
                  &nbsp;<span>|</span>&nbsp;
                  
                    <a target="self" class="" href="index.html">Home</a>
                    &nbsp;<span>|</span>&nbsp;
                  
                    <a target="_self" class="" href="archives.html">Archives</a>
                    &nbsp;<span>|</span>&nbsp;
                                             
                </div>

                <p class="footer-copyright">
                        Copyright &copy; 2019
                        Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
                        Theme used <a target="_blank" href="https://blog.timac.org">Timac</a>.
                </p>
            </div>
        </footer>



<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>

  













        
      
  
    


    </body>
</html>
