

<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
      
    --- - shengsheng的博客
    
    </title>
    
    
    
    <link href="atom.xml" rel="alternate" title="shengsheng的博客" type="application/atom+xml">
    <link rel="stylesheet" href="asset/style.css">
    
</head>
  <body>




        <div id="wrapper">
            <header class="site-header">
                <div class="container">
                    <div class="site-title-wrapper">
                          <a class="button-square" href="index.html">
<svg class="svg-inline--fa fa-home fa-w-18" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="home" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" data-fa-i2svg=""><path fill="currentColor" d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"></path></svg>
                            </a>
                        
                         
                        
                        
                        
                        <a class="button-square" href="https://github.com/showx" target="_blank" title="github">
                               <svg class="svg-inline--fa fa-github fa-w-16" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" data-fa-i2svg=""><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><!-- <i class="fab fa-github fa-lg"></i> -->
                          </a>
                        
                        
                      
                      <a class="button-square" href="atom.xml" target="_blank" title="RSS">
                              <svg class="svg-inline--fa fa-rss fa-w-14" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"></path></svg><!-- <i class="fas fa-rss fa-lg"></i> -->
                      </a>

              
                       
                         
                        
                    </div>

                    <ul class="site-nav">
                        
                    </ul>
                </div>
            </header>

            <div id="container">

 
<div class="container">
  <article class="post-container">
    <header class="post-header">
        <h1 class="post-title">---</h1>
        <p class="post-date">
                <span>Posted <time datetime="2020/02/06" itemprop="datePublished">2020/02/06</time></span>
            </p>
    </header>

    <div class="post-content clearfix">
<p>layout: post<br/>
title: redis php 实例<br/>
date: 2015-07-08 16:28<br/>
author: admin<br/>
comments: true</p>

<h2 id="toc_0">categories: []</h2>

<p>redis的操作很多的，以前看到一个比较全的博客，但是现在找不到了。查个东西搜半天，下面整理一下php处理redis的例子，个人觉得常用一些例子。下面的例子都是基于php-redis这个扩展的。</p>

<p>1，connect</p>

<p>描述：实例连接到一个Redis.<br/>
参数：host: string，port: int<br/>
返回值：BOOL 成功返回：TRUE;失败返回：FALSE<br/>
查看复制打印?</p>

<pre><code class="language-text">示例：  

&lt;?php  
$redis = new redis();  
$result = $redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
var_dump($result); //结果：bool(true)  
?&gt;  
</code></pre>

<p>2，set</p>

<p>描述：设置key和value的值<br/>
参数：Key Value<br/>
返回值：BOOL 成功返回：TRUE;失败返回：FALSE</p>

<p>示例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$result = $redis-&gt;set(&#39;test&#39;,&quot;11111111111&quot;);  
var_dump($result);    //结果：bool(true)  
?&gt;  
</code></pre>

<p>3，get</p>

<p>描述：获取有关指定键的值<br/>
参数：key<br/>
返回值：string或BOOL 如果键不存在，则返回 FALSE。否则，返回指定键对应的value值。</p>

<p>范例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$result = $redis-&gt;get(&#39;test&#39;);  
var_dump($result);   //结果：string(11) &quot;11111111111&quot;  
?&gt;  
</code></pre>

<p>4，delete</p>

<p>描述：删除指定的键<br/>
参数：一个键，或不确定数目的参数，每一个关键的数组：key1 key2 key3 … keyN<br/>
返回值：删除的项数<br/>
范例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;set(&#39;test&#39;,&quot;1111111111111&quot;);  
echo $redis-&gt;get(&#39;test&#39;);   //结果：1111111111111  
$redis-&gt;delete(&#39;test&#39;);  
var_dump($redis-&gt;get(&#39;test&#39;));  //结果：bool(false)  
?&gt;  
</code></pre>

<p>5，setnx</p>

<p>描述：如果在数据库中不存在该键，设置关键值参数<br/>
参数：key value<br/>
返回值：BOOL 成功返回：TRUE;失败返回：FALSE</p>

<p>范例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;set(&#39;test&#39;,&quot;1111111111111&quot;);  
$redis-&gt;setnx(&#39;test&#39;,&quot;22222222&quot;);  
echo $redis-&gt;get(&#39;test&#39;);  //结果：1111111111111  
$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;setnx(&#39;test&#39;,&quot;22222222&quot;);  
echo $redis-&gt;get(&#39;test&#39;);  //结果：22222222  
?&gt;  
</code></pre>

<p>6，exists</p>

<p>描述：验证指定的键是否存在<br/>
参数key<br/>
返回值：Bool 成功返回：TRUE;失败返回：FALSE</p>

<p>范例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;set(&#39;test&#39;,&quot;1111111111111&quot;);  
var_dump($redis-&gt;exists(&#39;test&#39;));  //结果：bool(true)  
?&gt;  
</code></pre>

<p>7，incr</p>

<p>描述：数字递增存储键值键.<br/>
参数：key value：将被添加到键的值<br/>
返回值：INT the new value<br/>
实例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;set(&#39;test&#39;,&quot;123&quot;);  
var_dump($redis-&gt;incr(&quot;test&quot;));  //结果：int(124)  
var_dump($redis-&gt;incr(&quot;test&quot;));  //结果：int(125)  
?&gt;  
</code></pre>

<p>8，decr</p>

<p>描述：数字递减存储键值。<br/>
参数：key value：将被添加到键的值<br/>
返回值：INT the new value<br/>
实例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;set(&#39;test&#39;,&quot;123&quot;);  
var_dump($redis-&gt;decr(&quot;test&quot;));  //结果：int(122)  
var_dump($redis-&gt;decr(&quot;test&quot;));  //结果：int(121)  
?&gt;  
</code></pre>

<p>9，getMultiple</p>

<p>描述：取得所有指定键的值。如果一个或多个键不存在，该数组中该键的值为假<br/>
参数：其中包含键值的列表数组<br/>
返回值：返回包含所有键的值的数组<br/>
实例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;set(&#39;test1&#39;,&quot;1&quot;);  
$redis-&gt;set(&#39;test2&#39;,&quot;2&quot;);  
$result = $redis-&gt;getMultiple(array(&#39;test1&#39;,&#39;test2&#39;));  
print_r($result);   //结果：Array ( [0] =&gt; 1 [1] =&gt; 2 )  
?&gt;  
</code></pre>

<p>10，lpush</p>

<p>描述：由列表头部添加字符串值。如果不存在该键则创建该列表。如果该键存在，而且不是一个列表，返回FALSE。<br/>
参数：key,value<br/>
返回值：成功返回数组长度，失败false</p>

<p>实例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
var_dump($redis-&gt;lpush(&quot;test&quot;,&quot;111&quot;));   //结果：int(1)  
var_dump($redis-&gt;lpush(&quot;test&quot;,&quot;222&quot;));   //结果：int(2)  
?&gt;  
</code></pre>

<p>11，rpush</p>

<p>描述：由列表尾部添加字符串值。如果不存在该键则创建该列表。如果该键存在，而且不是一个列表，返回FALSE。<br/>
参数：key,value<br/>
返回值：成功返回数组长度，失败false<br/>
范例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
var_dump($redis-&gt;lpush(&quot;test&quot;,&quot;111&quot;));   //结果：int(1)  
var_dump($redis-&gt;lpush(&quot;test&quot;,&quot;222&quot;));   //结果：int(2)  
var_dump($redis-&gt;rpush(&quot;test&quot;,&quot;333&quot;));   //结果：int(3)  
var_dump($redis-&gt;rpush(&quot;test&quot;,&quot;444&quot;));   //结果：int(4)  
?&gt;  
</code></pre>

<p>12，lpop</p>

<p>描述：返回和移除列表的第一个元素<br/>
参数：key<br/>
返回值：成功返回第一个元素的值 ，失败返回false</p>

<p>范例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;lpush(&quot;test&quot;,&quot;111&quot;);  
$redis-&gt;lpush(&quot;test&quot;,&quot;222&quot;);  
$redis-&gt;rpush(&quot;test&quot;,&quot;333&quot;);  
$redis-&gt;rpush(&quot;test&quot;,&quot;444&quot;);  
var_dump($redis-&gt;lpop(&quot;test&quot;));  //结果：string(3) &quot;222&quot;  
?&gt;  
</code></pre>

<p>12，rpop</p>

<p>描述：返回和移除列表的最后一个元素<br/>
参数：key<br/>
返回值：成功返回最后一个元素的值 ，失败返回false</p>

<p>范例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;lpush(&quot;test&quot;,&quot;111&quot;);  
$redis-&gt;lpush(&quot;test&quot;,&quot;222&quot;);  
$redis-&gt;rpush(&quot;test&quot;,&quot;333&quot;);  
$redis-&gt;rpush(&quot;test&quot;,&quot;444&quot;);  
var_dump($redis-&gt;rpop(&quot;test&quot;));  //结果：string(3) &quot;444&quot;  
?&gt;  
</code></pre>

<p>13，lsize,llen</p>

<p>描述：返回的列表的长度。如果列表不存在或为空，该命令返回0。如果该键不是列表，该命令返回FALSE。<br/>
参数：Key<br/>
返回值：成功返回数组长度，失败false<br/>
范例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;lpush(&quot;test&quot;,&quot;111&quot;);  
$redis-&gt;lpush(&quot;test&quot;,&quot;222&quot;);  
$redis-&gt;rpush(&quot;test&quot;,&quot;333&quot;);  
$redis-&gt;rpush(&quot;test&quot;,&quot;444&quot;);  
var_dump($redis-&gt;lsize(&quot;test&quot;));  //结果：int(4)  
?&gt;  
</code></pre>

<p>14，lget</p>

<p>描述：返回指定键存储在列表中指定的元素。 0第一个元素，1第二个… -1最后一个元素，-2的倒数第二…错误的索引或键不指向列表则返回FALSE。<br/>
参数：key index<br/>
返回值：成功返回指定元素的值，失败false</p>

<p>范例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;lpush(&quot;test&quot;,&quot;111&quot;);  
$redis-&gt;lpush(&quot;test&quot;,&quot;222&quot;);  
$redis-&gt;rpush(&quot;test&quot;,&quot;333&quot;);  
$redis-&gt;rpush(&quot;test&quot;,&quot;444&quot;);  
var_dump($redis-&gt;lget(&quot;test&quot;,3));  //结果：string(3) &quot;444&quot;  
?&gt;  
</code></pre>

<p>15，lset</p>

<p>描述：为列表指定的索引赋新的值,若不存在该索引返回false.<br/>
参数：key index value<br/>
返回值：成功返回true,失败false</p>

<p>范例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;lpush(&quot;test&quot;,&quot;111&quot;);  
$redis-&gt;lpush(&quot;test&quot;,&quot;222&quot;);  
var_dump($redis-&gt;lget(&quot;test&quot;,1));  //结果：string(3) &quot;111&quot;  
var_dump($redis-&gt;lset(&quot;test&quot;,1,&quot;333&quot;));  //结果：bool(true)  
var_dump($redis-&gt;lget(&quot;test&quot;,1));  //结果：string(3) &quot;333&quot;  
?&gt;  
</code></pre>

<p>16，lgetrange</p>

<p>描述：<br/>
返回在该区域中的指定键列表中开始到结束存储的指定元素，lGetRange(key, start, end)。0第一个元素，1第二个元素… -1最后一个元素，-2的倒数第二…<br/>
参数：key start end<br/>
返回值：成功返回查找的值，失败false</p>

<p>范例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;lpush(&quot;test&quot;,&quot;111&quot;);  
$redis-&gt;lpush(&quot;test&quot;,&quot;222&quot;);  
print_r($redis-&gt;lgetrange(&quot;test&quot;,0,-1));  //结果：Array ( [0] =&gt; 222 [1] =&gt; 111 )  
?&gt;  
</code></pre>

<p>17,lremove</p>

<p>描述：从列表中从头部开始移除count个匹配的值。如果count为零，所有匹配的元素都被删除。如果count是负数，内容从尾部开始删除。<br/>
参数：key count value<br/>
返回值：成功返回删除的个数，失败false<br/>
范例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;lpush(&#39;test&#39;,&#39;a&#39;);  
$redis-&gt;lpush(&#39;test&#39;,&#39;b&#39;);  
$redis-&gt;lpush(&#39;test&#39;,&#39;c&#39;);  
$redis-&gt;rpush(&#39;test&#39;,&#39;a&#39;);  
print_r($redis-&gt;lgetrange(&#39;test&#39;, 0, -1)); //结果：Array ( [0] =&gt; c [1] =&gt; b [2] =&gt; a [3] =&gt; a )  
var_dump($redis-&gt;lremove(&#39;test&#39;,&#39;a&#39;,2));   //结果：int(2)  
print_r($redis-&gt;lgetrange(&#39;test&#39;, 0, -1)); //结果：Array ( [0] =&gt; c [1] =&gt; b )  
?&gt;  
</code></pre>

<p>18，sadd</p>

<p>描述：为一个Key添加一个值。如果这个值已经在这个Key中，则返回FALSE。<br/>
参数：key value<br/>
返回值：成功返回true,失败false<br/>
范例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
var_dump($redis-&gt;sadd(&#39;test&#39;,&#39;111&#39;));   //结果：bool(true)  
var_dump($redis-&gt;sadd(&#39;test&#39;,&#39;333&#39;));   //结果：bool(true)  
print_r($redis-&gt;sort(&#39;test&#39;)); //结果：Array ( [0] =&gt; 111 [1] =&gt; 333 )  
?&gt;  
</code></pre>

<p>19，sremove</p>

<p>描述：删除Key中指定的value值<br/>
参数：key member<br/>
返回值：true or false<br/>
范例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;sadd(&#39;test&#39;,&#39;111&#39;);  
$redis-&gt;sadd(&#39;test&#39;,&#39;333&#39;);  
$redis-&gt;sremove(&#39;test&#39;,&#39;111&#39;);  
print_r($redis-&gt;sort(&#39;test&#39;));    //结果：Array ( [0] =&gt; 333 )  
?&gt;  
</code></pre>

<p>20,smove</p>

<p>描述：将Key1中的value移动到Key2中<br/>
参数：srcKey dstKey member<br/>
返回值：true or false<br/>
范例<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;delete(&#39;test1&#39;);  
$redis-&gt;sadd(&#39;test&#39;,&#39;111&#39;);  
$redis-&gt;sadd(&#39;test&#39;,&#39;333&#39;);  
$redis-&gt;sadd(&#39;test1&#39;,&#39;222&#39;);  
$redis-&gt;sadd(&#39;test1&#39;,&#39;444&#39;);  
$redis-&gt;smove(&#39;test&#39;,&quot;test1&quot;,&#39;111&#39;);  
print_r($redis-&gt;sort(&#39;test1&#39;));    //结果：Array ( [0] =&gt; 111 [1] =&gt; 222 [2] =&gt; 444 )  
?&gt;  
</code></pre>

<p>21，scontains</p>

<p>描述：检查集合中是否存在指定的值。<br/>
参数：key value<br/>
返回值：true or false<br/>
范例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;sadd(&#39;test&#39;,&#39;111&#39;);  
$redis-&gt;sadd(&#39;test&#39;,&#39;112&#39;);  
$redis-&gt;sadd(&#39;test&#39;,&#39;113&#39;);  
var_dump($redis-&gt;scontains(&#39;test&#39;, &#39;111&#39;)); //结果：bool(true)  
?&gt;  
</code></pre>

<p>22,ssize</p>

<p>描述：返回集合中存储值的数量<br/>
参数：key<br/>
返回值：成功返回数组个数，失败0<br/>
范例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;sadd(&#39;test&#39;,&#39;111&#39;);  
$redis-&gt;sadd(&#39;test&#39;,&#39;112&#39;);  
echo $redis-&gt;ssize(&#39;test&#39;);   //结果：2  
?&gt;  
</code></pre>

<p>23，spop</p>

<p>描述：随机移除并返回key中的一个值<br/>
参数：key<br/>
返回值：成功返回删除的值，失败false</p>

<p>范例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;111&quot;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;222&quot;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;333&quot;);  
var_dump($redis-&gt;spop(&quot;test&quot;));  //结果：string(3) &quot;333&quot;  
?&gt;  
</code></pre>

<p>24,sinter</p>

<p>描述：返回一个所有指定键的交集。如果只指定一个键，那么这个命令生成这个集合的成员。如果不存在某个键，则返回FALSE。<br/>
参数：key1, key2, keyN<br/>
返回值：成功返回数组交集，失败false</p>

<p>范例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;111&quot;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;222&quot;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;333&quot;);  
$redis-&gt;sadd(&quot;test1&quot;,&quot;111&quot;);  
$redis-&gt;sadd(&quot;test1&quot;,&quot;444&quot;);  
var_dump($redis-&gt;sinter(&quot;test&quot;,&quot;test1&quot;));  //结果：array(1) { [0]=&gt; string(3) &quot;111&quot; }  
?&gt;  
</code></pre>

<p>25,sinterstore</p>

<p>描述：执行sInter命令并把结果储存到新建的变量中。<br/>
参数：<br/>
Key: dstkey, the key to store the diff into.<br/>
Keys: key1, key2… keyN. key1..keyN are intersected as in sInter.<br/>
返回值：成功返回，交集的个数，失败false<br/>
范例:<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;111&quot;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;222&quot;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;333&quot;);  
$redis-&gt;sadd(&quot;test1&quot;,&quot;111&quot;);  
$redis-&gt;sadd(&quot;test1&quot;,&quot;444&quot;);  
var_dump($redis-&gt;sinterstore(&#39;new&#39;,&quot;test&quot;,&quot;test1&quot;));  //结果：int(1)  
var_dump($redis-&gt;smembers(&#39;new&#39;));  //结果:array(1) { [0]=&gt; string(3) &quot;111&quot; }  
?&gt;  
</code></pre>

<p>26,sunion</p>

<p>描述：<br/>
返回一个所有指定键的并集<br/>
参数：<br/>
Keys: key1, key2, … , keyN<br/>
返回值：成功返回合并后的集，失败false<br/>
范例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;111&quot;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;222&quot;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;333&quot;);  
$redis-&gt;sadd(&quot;test1&quot;,&quot;111&quot;);  
$redis-&gt;sadd(&quot;test1&quot;,&quot;444&quot;);  
print_r($redis-&gt;sunion(&quot;test&quot;,&quot;test1&quot;));  //结果：Array ( [0] =&gt; 111 [1] =&gt; 222 [2] =&gt; 333 [3] =&gt; 444 )  
?&gt;  
</code></pre>

<p>27,sunionstore</p>

<p>描述：执行sunion命令并把结果储存到新建的变量中。<br/>
参数：<br/>
Key: dstkey, the key to store the diff into.<br/>
Keys: key1, key2… keyN. key1..keyN are intersected as in sInter.<br/>
返回值：成功返回，交集的个数，失败false<br/>
范例:<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;111&quot;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;222&quot;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;333&quot;);  
$redis-&gt;sadd(&quot;test1&quot;,&quot;111&quot;);  
$redis-&gt;sadd(&quot;test1&quot;,&quot;444&quot;);  
var_dump($redis-&gt;sunionstore(&#39;new&#39;,&quot;test&quot;,&quot;test1&quot;));  //结果：int(4)  
print_r($redis-&gt;smembers(&#39;new&#39;));  //结果:Array ( [0] =&gt; 111 [1] =&gt; 222 [2] =&gt; 333 [3] =&gt; 444 )  
?&gt;  
</code></pre>

<p>28,sdiff</p>

<p>描述：返回第一个集合中存在并在其他所有集合中不存在的结果<br/>
参数：Keys: key1, key2, … , keyN: Any number of keys corresponding to sets in redis.<br/>
返回值：成功返回数组，失败false<br/>
范例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;111&quot;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;222&quot;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;333&quot;);  
$redis-&gt;sadd(&quot;test1&quot;,&quot;111&quot;);  
$redis-&gt;sadd(&quot;test1&quot;,&quot;444&quot;);  
print_r($redis-&gt;sdiff(&quot;test&quot;,&quot;test1&quot;));  //结果：Array ( [0] =&gt; 222 [1] =&gt; 333 )  
?&gt;  
</code></pre>

<p>29,sdiffstore</p>

<p>描述：执行sdiff命令并把结果储存到新建的变量中。<br/>
参数：<br/>
Key: dstkey, the key to store the diff into.<br/>
Keys: key1, key2, … , keyN: Any number of keys corresponding to sets in redis<br/>
返回值：成功返回数字，失败false<br/>
范例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;111&quot;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;222&quot;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;333&quot;);  
$redis-&gt;sadd(&quot;test1&quot;,&quot;111&quot;);  
$redis-&gt;sadd(&quot;test1&quot;,&quot;444&quot;);  
var_dump($redis-&gt;sdiffstore(&#39;new&#39;,&quot;test&quot;,&quot;test1&quot;));  //结果：int(2)  
print_r($redis-&gt;smembers(&#39;new&#39;));  //结果:Array ( [0] =&gt; 222 [1] =&gt; 333 )  
?&gt;  
</code></pre>

<p>30,smembers, sgetmembers</p>

<p>描述：<br/>
返回集合的内容<br/>
参数：Key: key<br/>
返回值：An array of elements, the contents of the set.<br/>
范例：<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;127.0.0.1&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;111&quot;);  
$redis-&gt;sadd(&quot;test&quot;,&quot;222&quot;);  
print_r($redis-&gt;smembers(&#39;test&#39;));  //结果:Array ( [0] =&gt; 111 [1] =&gt; 222 )  
?&gt;  
</code></pre>

<p>php-redis当中，有很多不同名字，但是功能一样的函数，例如：lrem和lremove，这里就不例举了。</p>

<h1 id="toc_1"></h1>

<p>前面一篇博客主要是string类型，list类型和set类型，下面hash类型和zset类型</p>

<p>1,hset</p>

<p>描述：将哈希表key中的域field的值设为value。如果key不存在，一个新的哈希表被创建并进行HSET操作。如果域field已经存在于哈希表中，旧值将被覆盖。<br/>
参数：key field value<br/>
返回值：如果field是哈希表中的一个新建域，并且值设置成功，返回1。如果哈希表中域field已经存在且旧值已被新值覆盖，返回0。</p>

<p>实例1</p>

<p>2，hsetnx</p>

<p>描述：将哈希表key中的域field的值设置为value，当且仅当域field不存在。若域field已经存在，该操作无效。如果key不存在，一个新哈希表被创建并执行HSETNX命令。<br/>
参数：key field value<br/>
返回值：设置成功，返回1。如果给定域已经存在且没有操作被执行，返回0。</p>

<p>实例1</p>

<p>3，hget</p>

<p>描述：返回哈希表key中给定域field的值。<br/>
参数：key field<br/>
返回值：给定域的值。当给定域不存在或是给定key不存在时，返回nil。</p>

<p>实例1</p>

<p>4,hmset</p>

<p>描述：同时将多个field - value(域-值)对设置到哈希表key中。此命令会覆盖哈希表中已存在的域。如果key不存在，一个空哈希表被创建并执行HMSET操作。<br/>
参数：key field value [field value ...]<br/>
返回值：如果命令执行成功，返回OK。当key不是哈希表(hash)类型时，返回一个错误。</p>

<p>实例1</p>

<p>5,hmget</p>

<p>描述:返回哈希表key中，一个或多个给定域的值。如果给定的域不存在于哈希表，那么返回一个nil值。因为不存在的key被当作一个空哈希表来处理，所以对一个不存在的key进行HMGET操作将返回一个只带有nil值的表。<br/>
参数：key field [field ...]<br/>
返回值：一个包含多个给定域的关联值的表，表值的排列顺序和给定域参数的请求顺序一样。</p>

<p>实例1</p>

<p>6,hgetall</p>

<p>描述:返回哈希表key中，所有的域和值。在返回值里，紧跟每个域名(field name)之后是域的值(value)，所以返回值的长度是哈希表大小的两倍。<br/>
参数：key<br/>
返回值:以列表形式返回哈希表的域和域的值。 若key不存在，返回空列表。</p>

<p>实例1</p>

<p>7,hdel</p>

<p>描述:删除哈希表key中的一个或多个指定域，不存在的域将被忽略。<br/>
参数：key field [field ...]<br/>
返回值:被成功移除的域的数量，不包括被忽略的域。</p>

<p>实例1</p>

<p>8,hlen</p>

<p>描述:返回哈希表key中域的数量。<br/>
参数：key<br/>
返回值：哈希表中域的数量。当key不存在时，返回0。</p>

<p>实例1</p>

<p>9,hexists</p>

<p>描述:查看哈希表key中，给定域field是否存在。<br/>
参数：key field<br/>
返回值：如果哈希表含有给定域，返回1。如果哈希表不含有给定域，或key不存在，返回0。</p>

<p>实例1</p>

<p>10,hincrby</p>

<p>描述:为哈希表key中的域field的值加上增量increment。增量也可以为负数，相当于对给定域进行减法操作。<br/>
参数：key field increment<br/>
返回值：执行HINCRBY命令之后，哈希表key中域field的值。</p>

<p>实例1</p>

<p>11,hkeys</p>

<p>描述:返回哈希表key中的所有域。<br/>
参数：key<br/>
返回值：一个包含哈希表中所有域的表。当key不存在时，返回一个空表。</p>

<p>实例1</p>

<p>12,hvals</p>

<p>描述:返回哈希表key中的所有值。<br/>
参数：key<br/>
返回值：一个包含哈希表中所有值的表。当key不存在时，返回一个空表。<br/>
实例1<br/>
查看复制打印?</p>

<pre><code class="language-text">&lt;?php  
$redis = new redis();  
$redis-&gt;connect(&#39;192.168.1.108&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;hset(&#39;test&#39;, &#39;key1&#39;, &#39;hello&#39;);  
echo $redis-&gt;hget(&#39;test&#39;, &#39;key1&#39;);     //结果：hello  

echo &quot;&lt;br&gt;&quot;;  
$redis-&gt;hSetNx(&#39;test&#39;, &#39;key1&#39;, &#39;world&#39;);  
echo $redis-&gt;hget(&#39;test&#39;, &#39;key1&#39;);   //结果：hello  

$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;hSetNx(&#39;test&#39;, &#39;key1&#39;, &#39;world&#39;);  
echo &quot;&lt;br&gt;&quot;;  
echo $redis-&gt;hget(&#39;test&#39;, &#39;key1&#39;);   //结果：world  

echo $redis-&gt;hlen(&#39;test&#39;);   //结果：1  
var_dump($redis-&gt;hdel(&#39;test&#39;,&#39;key1&#39;));  //结果：bool(true)   

$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;hSet(&#39;test&#39;, &#39;a&#39;, &#39;x&#39;);  
$redis-&gt;hSet(&#39;test&#39;, &#39;b&#39;, &#39;y&#39;);  
$redis-&gt;hSet(&#39;test&#39;, &#39;c&#39;, &#39;z&#39;);  
print_r($redis-&gt;hkeys(&#39;test&#39;));  //结果：Array ( [0] =&gt; a [1] =&gt; b [2] =&gt; c )   

print_r($redis-&gt;hvals(&#39;test&#39;));  //结果：Array ( [0] =&gt; x [1] =&gt; y [2] =&gt; z )   

print_r($redis-&gt;hgetall(&#39;test&#39;));  //结果：Array ( [a] =&gt; x [b] =&gt; y [c] =&gt; z )   

var_dump($redis-&gt;hExists(&#39;test&#39;, &#39;a&#39;));  //结果：bool(true)   

$redis-&gt;delete(&#39;test&#39;);  
echo $redis-&gt;hIncrBy(&#39;test&#39;, &#39;a&#39;, 3);    //结果：3  
echo $redis-&gt;hIncrBy(&#39;test&#39;, &#39;a&#39;, 1);    //结果：4  

$redis-&gt;delete(&#39;test&#39;);  
var_dump($redis-&gt;hmset(&#39;test&#39;, array(&#39;name&#39; =&gt;&#39;tank&#39;, &#39;sex&#39;=&gt;&quot;man&quot;))); //结果：bool(true)  
print_r($redis-&gt;hmget(&#39;test&#39;, array(&#39;name&#39;, &#39;sex&#39;)));  //结果：Array ( [name] =&gt; tank [sex] =&gt; man )  
?&gt;  
</code></pre>

<p>13,zadd</p>

<p>描述：<br/>
增加一个或多个元素，如果该元素已经存在，更新它的socre值<br/>
虽然有序集合有序，但它也是集合，不能重复元素，添加重复元素只会<br/>
更新原有元素的score值</p>

<p>参数：<br/>
key<br/>
score : double<br/>
value: string</p>

<p>返回值：1 or 0</p>

<p>实例2</p>

<p>14，zrange</p>

<p>描述：取得特定范围内的排序元素,0代表第一个元素,1代表第二个以此类推。-1代表最后一个,-2代表倒数第二个...</p>

<p>参数：<br/>
key<br/>
start: long<br/>
end: long<br/>
withscores: bool = false</p>

<p>返回值：数组</p>

<p>实例2</p>

<p>15，zdelete, zrem</p>

<p>描述：从有序集合中删除指定的成员。</p>

<p>参数：<br/>
key<br/>
member</p>

<p>返回值：1 or 0</p>

<p>实例2</p>

<p>16，zrevrange</p>

<p>描述：返回key对应的有序集合中指定区间的所有元素。这些元素按照score从高到低的顺序进行排列。对于具有相同的score的元素而言，将会按照递减的字典顺序进行排列。该命令与ZRANGE类似，只是该命令中元素的排列顺序与前者不同。</p>

<p>参数：<br/>
key<br/>
start: long<br/>
end: long<br/>
withscores: bool = false</p>

<p>返回值：数组</p>

<p>实例2</p>

<p>17，zrangebyscore, zrevrangebyscore</p>

<p>描述：返回key对应的有序集合中score介于min和max之间的所有元素（包哈score等于min或者max的元素）。元素按照score从低到高的顺序排列。如果元素具有相同的score，那么会按照字典顺序排列。<br/>
可选的选项LIMIT可以用来获取一定范围内的匹配元素。如果偏移值较大，有序集合需要在获得将要返回的元素之前进行遍历，因此会增加O(N)的时间复杂度。可选的选项WITHSCORES可以使得在返回元素的同时返回元素的score，该选项自从Redis 2.0版本后可用。</p>

<p>参数：<br/>
key<br/>
start: string<br/>
end: string<br/>
options: array</p>

<p>返回值：数组</p>

<p>实例2</p>

<p>18，zcount</p>

<p>描述：返回key对应的有序集合中介于min和max间的元素的个数。</p>

<p>参数：<br/>
key<br/>
start: string<br/>
end: string</p>

<p>返回值：数组长度</p>

<p>实例2</p>

<p>19，zremrangebyscore, zreleterangebyscore</p>

<p>描述：移除key对应的有序集合中scroe位于min和max（包含端点）之间的所哟元素。从2.1.6版本后开始，区间端点min和max可以被排除在外，这和ZRANGEBYSCORE的语法一样。</p>

<p>参数：<br/>
key<br/>
start: double or &quot;+inf&quot; or &quot;-inf&quot; string<br/>
end: double or &quot;+inf&quot; or &quot;-inf&quot; string</p>

<p>返回值：删除元素个数</p>

<p>实例2</p>

<p>20，zremrangebyrank, zdeleterangebyrank</p>

<p>描述：移除key对应的有序集合中rank值介于start和stop之间的所有元素。start和stop均是从0开始的，并且两者均可以是负值。当索引值为负值时，表明偏移值从有序集合中score值最高的元素开始。例如：-1表示具有最高score的元素，而-2表示具有次高score的元素，以此类推。</p>

<p>参数：<br/>
key<br/>
start: LONG<br/>
end: LONG</p>

<p>返回值：删除元素个数</p>

<p>实例2</p>

<p>21，zsize, zcard</p>

<p>描述：返回存储在key对应的有序集合中的元素的个数。<br/>
参数：key<br/>
返回值：元素个数</p>

<p>实例2</p>

<p>22，zscore</p>

<p>描述：返回key对应的有序集合中member的score值。如果member在有序集合中不存在，那么将会返回null。<br/>
参数：key member</p>

<p>实例2</p>

<p>23,zrank, zrevrank</p>

<p>描述：返回key对应的有序集合中member元素的索引值，元素按照score从低到高进行排列。rank值（或index）是从0开始的，这意味着具有最低score值的元素的rank值为0。使用ZREVRANK可以获得从高到低排列的元素的rank（或index）。<br/>
参数：key member<br/>
返回值：数字</p>

<p>实例2</p>

<p>24，zincrby</p>

<p>将key对应的有序集合中member元素的scroe加上increment。如果指定的member不存在，那么将会添加该元素，并且其score的初始值为increment。如果key不存在，那么将会创建一个新的有序列表，其中包含member这一唯一的元素。如果key对应的值不是有序列表，那么将会发生错误。指定的score的值应该是能够转换为数字值的字符串，并且接收双精度浮点数。同时，你也可用提供一个负值，这样将减少score的值。<br/>
参数：key value member<br/>
返回值：字符型数据</p>

<p>实例2</p>

<p>25，zunion</p>

<p>描述：keys对应的numkeys个有序集合计算合集，并将结果存储在destination中<br/>
参数：keyOutput arrayZSetKeys arrayWeights aggregateFunction<br/>
返回值：并集数组</p>

<p>实例2</p>

<p>26，zinter</p>

<p>描述：keys对应的numkeys个有序集合计算交集，并将结果存储在destination中<br/>
参数：keyOutput arrayZSetKeys arrayWeights aggregateFunction<br/>
返回值：交集数组</p>

<p>实例2</p>

<p>查看复制打印?</p>

<pre><code class="language-text">$redis = new redis();  
$redis-&gt;connect(&#39;192.168.1.108&#39;, 6379);  
$redis-&gt;delete(&#39;test&#39;);  
$redis-&gt;zadd(&#39;test&#39;, 1, &#39;val1&#39;);  
$redis-&gt;zadd(&#39;test&#39;, 0, &#39;val2&#39;);  
$redis-&gt;zadd(&#39;test&#39;, 3, &#39;val3&#39;);  

print_r($redis-&gt;zrange(&#39;test&#39;, 0, -1)); //结果：Array ( [0] =&gt; val2 [1] =&gt; val1 [2] =&gt; val3 )  

$redis-&gt;zdelete(&#39;test&#39;, &#39;val2&#39;);  
print_r($redis-&gt;zrange(&#39;test&#39;, 0, -1)); //结果：Array ( [0] =&gt; val1 [1] =&gt; val3 )   

$redis-&gt;zadd(&#39;test&#39;,4, &#39;val0&#39;);  
print_r($redis-&gt;zrevrange(&#39;test&#39;, 0, -1));  //结果：Array ( [0] =&gt; val0 [1] =&gt; val3 [2] =&gt; val1 )  
print_r($redis-&gt;zrevrange(&#39;test&#39;, 0, -1,true));  //结果：Array ( [val0] =&gt; 4 [val3] =&gt; 3 [val1] =&gt; 1 )   

echo &quot;&lt;br&gt;&quot;;  
$redis-&gt;zadd(&#39;key&#39;, 0, &#39;val0&#39;);  
$redis-&gt;zadd(&#39;key&#39;, 2, &#39;val2&#39;);  
$redis-&gt;zadd(&#39;key&#39;, 10, &#39;val10&#39;);  

print_r($redis-&gt;zrangebyscore(&#39;key&#39;, 0, 3, array(&#39;limit&#39; =&gt; array(1, 1),&#39;withscores&#39; =&gt; TRUE))); //结果：Array ( [val2] =&gt; 2 )  
print_r($redis-&gt;zrangebyscore(&#39;key&#39;, 0, 3, array(&#39;limit&#39; =&gt; array(1, 1)))); //结果：Array ( [0] =&gt; val2 )   

echo $redis-&gt;zcount(&#39;key&#39;, 0, 3); //结果：2  

$redis-&gt;zremrangebyscore(&#39;key&#39;, 0, 3);  
print_r($redis-&gt;zrange(&#39;key&#39;, 0, -1));  //结果：Array ( [0] =&gt; val10 )   

echo $redis-&gt;zsize(&#39;key&#39;);   //结果：1  

$redis-&gt;zadd(&#39;key&#39;, 2.5, &#39;aaaa&#39;);  
echo $redis-&gt;zscore(&#39;key&#39;, &#39;aaaa&#39;);   //结果：2.5  

echo $redis-&gt;zrank(&#39;key&#39;, &#39;aaaa&#39;);   //结果：0  
echo $redis-&gt;zrevrank(&#39;key&#39;, &#39;aaaa&#39;);    //结果：1  

$redis-&gt;delete(&#39;key&#39;);  

echo $redis-&gt;zincrby(&#39;key&#39;, 2, &#39;aaaa&#39;);  //结果：2  
echo $redis-&gt;zincrby(&#39;key&#39;, 1, &#39;aaaa&#39;);  //结果：3  

$redis-&gt;delete(&#39;key&#39;);  
$redis-&gt;delete(&#39;test&#39;);  

$redis-&gt;zadd(&#39;key&#39;, 0, &#39;val0&#39;);  
$redis-&gt;zadd(&#39;key&#39;, 1, &#39;val1&#39;);  
$redis-&gt;zadd(&#39;key&#39;, 4, &#39;val2&#39;);  
$redis-&gt;zadd(&#39;test&#39;, 2, &#39;val2&#39;);  
$redis-&gt;zadd(&#39;test&#39;, 3, &#39;val3&#39;);  
$redis-&gt;zunion(&#39;k01&#39;, array(&#39;key&#39;, &#39;test&#39;));  
print_r($redis-&gt;zrange(&#39;k01&#39;,0, -1)); //结果：Array ( [0] =&gt; val0 [1] =&gt; val1 [2] =&gt; val3 [3] =&gt; val2 )  

$redis-&gt;zunion(&#39;k03&#39;, array(&#39;key&#39;, &#39;test&#39;), array(5, 1));  
print_r($redis-&gt;zrange(&#39;k03&#39;,0, -1)); //结果：Array ( [0] =&gt; val0 [1] =&gt; val3 [2] =&gt; val1 [3] =&gt; val2 )   

$redis-&gt;zinter(&#39;k02&#39;, array(&#39;key&#39;, &#39;test&#39;));  
print_r($redis-&gt;zrange(&#39;k02&#39;,0, -1)); //结果：Array ( [0] =&gt; val2 )  
?&gt;  
</code></pre>

    </div>
    <footer class="post-footer clearfix">
      
           
      
        
    </footer>
     <div class="comments-wrap">
        <div class="share-comments">
          

          

          
        </div>
      </div><!-- end comments wrap -->
  </article>
 </div><!-- end-->



    <footer class="footer">
            <div class="container">
                <div class="site-footer-wrapper">
                        <a class="button-square" href="index.html">
<svg class="svg-inline--fa fa-home fa-w-18" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="home" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" data-fa-i2svg=""><path fill="currentColor" d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"></path></svg>
                            </a>
                        
                         
                        
                        
                        
                        <a class="button-square" href="https://github.com/showx" target="_blank" title="github">
                               <svg class="svg-inline--fa fa-github fa-w-16" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" data-fa-i2svg=""><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><!-- <i class="fab fa-github fa-lg"></i> -->
                          </a>
                        
                        
                      
                      <a class="button-square" href="atom.xml" target="_blank" title="RSS">
                              <svg class="svg-inline--fa fa-rss fa-w-14" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"></path></svg><!-- <i class="fas fa-rss fa-lg"></i> -->
                      </a>

              
                       
                                                
                </div>
                <div class="site-menu-wrapper">
                  &nbsp;<span>|</span>&nbsp;
                  
                    <a target="self" class="" href="index.html">Home</a>
                    &nbsp;<span>|</span>&nbsp;
                  
                    <a target="_self" class="" href="archives.html">Archives</a>
                    &nbsp;<span>|</span>&nbsp;
                                             
                </div>

                <p class="footer-copyright">
                        Copyright &copy; 2019
                        Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
                        Theme used <a target="_blank" href="https://blog.timac.org">Timac</a>.
                </p>
            </div>
        </footer>



  













<script src="asset/prism.js"></script>

        
      
  
    


    </body>
</html>
