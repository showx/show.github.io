<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[shengsheng的博客]]></title>
  <link href="http://www.shengsheng.net/atom.xml" rel="self"/>
  <link href="http://www.shengsheng.net/"/>
  <updated>2020-02-28T23:25:45+08:00</updated>
  <id>http://www.shengsheng.net/</id>
  <author>
    <name><![CDATA[]]></name>
    
  </author>
  <generator uri="http://www.mweb.im/">MWeb</generator>
  
  <entry>
    <title type="html"><![CDATA[docker mysql5.6切5.7发生的异常]]></title>
    <link href="http://www.shengsheng.net/15831455058973.html"/>
    <updated>2020-03-02T18:38:25+08:00</updated>
    <id>http://www.shengsheng.net/15831455058973.html</id>
    <content type="html"><![CDATA[
<p>由于某项目需要用到 mysql 5.7的新功能json类型的字段<br/>
为了快速搭建,做了不太稳定的做法。<br/>
我的myql是映射到本地的 ~/code/mysql<br/>
<code><br/>
docker pull mysql/5.7<br/>
</code><br/>
下载好mysql5.7之后，停掉5.6<br/>
直接把mysql5.7的数据映射到本地<br/>
<code><br/>
docker run -it -d --volumes-from codedata --network docker_mynetwork --ip 172.20.0.7 -v /Users/pengyongsheng/code/mysql:/var/lib/mysql -p 3306:3306 --name mysql57 -e MYSQL_USER=root -e MYSQL_PASSWORD=root -e MYSQL_ROOT_PASSWORD=root mysql:5.7<br/>
</code></p>

<p><img src="media/15831455058973/15831456759323.jpg" alt=""/></p>

<h1 id="toc_0">事故</h1>

<p>一开始的运行还很正确的，后面出现打开不了tables;<br/>
Navicat for mysql 打开只能查看到information_schema数据库，而且只剩下CHARACTER_SETS。</p>

<h1 id="toc_1">解决方案</h1>

<ol>
<li>先将本地的~/code/mysql 重命名~/code/mysql2数据文件夹备份一下<br/>
把~/code/mysql清空，删除mysql5.7容器后，重新挂载，这时候产生了新的文件夹数据。</li>
<li><p>把备份的好的数据库文件~/code/msyql2里的数据库重新拷贝到~/code/mysql目录下。<br/>
打开查看，其实是能正常查看到数据库了。成功了第一步。<br/>
<img src="media/15831455058973/15831459908580.jpg" alt=""/></p></li>
<li><p>进一步打开数据库的table , 提示 Table &#39;&#39; doesn&#39;t exist 。<br/>
嗯。。遇到了新问题。 经查找资源，innodb的问题。停掉服务后，将mysql2的ibdata1文件夹拷到mysql数据文件夹中。这样，问题得到了解决。<br/>
<img src="media/15831455058973/15831462501495.jpg" alt=""/></p></li>
</ol>

<h1 id="toc_2">总结</h1>

<ol>
<li>mysql的升级，因为数据会记录版本和服务器的原因，不能直接切换容器，要么在原来的容器上升级mysql server。 </li>
<li>使用Innodb会产生三个文件<br/>
.ibd：包含每个table的数据和索引<br/>
.frm：用来描述table的结构等<br/>
ibdata1：包含所有table的字典和历史操作<br/>
ibdata1文件会记录MySQL中所有InnoDB数据库中table的字典和历史操作,所以要copy ibdata1文件过来。</li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[linux更新服务器]]></title>
    <link href="http://www.shengsheng.net/15829031335030.html"/>
    <updated>2020-02-28T23:18:53+08:00</updated>
    <id>http://www.shengsheng.net/15829031335030.html</id>
    <content type="html"><![CDATA[
<p>运营凌晨的时候录入规则，发现录入的规则有异常，查看得知获取的时间异常<br/>
<img src="media/15829031335030/15829032171296.jpg" alt=""/></p>

<p>默认linux的时区使用了 UTC<br/>
而中国的时区是CST<br/>
因为我是使用docker镜像上运行php,所以得去镜像里面更新一下</p>

<h1 id="toc_0">进入镜像</h1>

<p><code><br/>
docker -it php-fpm /bin/bash<br/>
</code></p>

<h1 id="toc_1">更新时间</h1>

<pre><code class="language-text">1. 安装ntpdate工具
sudo apt-get install ntpdate
2. 设置系统时间与网络时间同步
ntpdate cn.pool.ntp.org  或者 sudo ntpdate time.stdtime.gov.tw
#cn.pool.ntp.org是位于中国的公共NTP服务器 
</code></pre>

<h1 id="toc_2">更新时间失败</h1>

<pre><code class="language-text">root@6fc515dfb754:~# ntpdate us.pool.ntp.org
3 Nov 09:30:06 ntpdate[966]: Can&#39;t adjust the time of day: Operation not permitted
cp -f /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
</code></pre>

<h1 id="toc_3">php的配置</h1>

<h3 id="toc_4">php.ini</h3>

<pre><code class="language-text">[Date]
date.timezone = &quot;asia/shanghai&quot;
</code></pre>

<h3 id="toc_5">代码控制</h3>

<pre><code class="language-text">&lt;?php
date_default_timezone_set(&#39;Asia/Shanghai&#39;);
</code></pre>

<p>终所述，必须严格查看一下环境上的时间。</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[划动验证码的破解]]></title>
    <link href="http://www.shengsheng.net/15823712934354.html"/>
    <updated>2020-02-22T19:34:53+08:00</updated>
    <id>http://www.shengsheng.net/15823712934354.html</id>
    <content type="html"><![CDATA[
<p>最近需要获取某些信息，但每次页面都要滑动一次验证码实在太烦了，so研究一下破解方案。</p>

<h1 id="toc_0">使用的技术</h1>

<ul>
<li>python3</li>
<li>opencv</li>
<li>pymydb</li>
<li>selenium</li>
</ul>

<h1 id="toc_1">效果</h1>

<p><a href="media/15823712934354/1582371835327952.mp4">1582371835327952</a></p>

<h1 id="toc_2">核心思路</h1>

<p>1) 使用selenium加载网站，定位到验证码的iframe<br/>
2) 背景版，缺口图，使用opencv灰度图像分析出缺口位置。</p>

<pre><code class="language-text">result = cv2.matchTemplate(target, template, cv2.TM_CCOEFF_NORMED)
x, y = np.unravel_index(result.argmax(), result.shape)
</code></pre>

<p>3) 控制验证码的滑块到指定位置。<br/>
4) 代理ip的使用，因为对于ip访问次数太多，验证码就算滑中了，也是不正确的。</p>

<h1 id="toc_3">具体代码</h1>

<pre><code class="language-text">#!/usr/bin/env python
# encoding: utf-8

import random
import time
import os
import cv2
import ssl
import pymysql
import urllib.request
import numpy as np
from PIL import Image
from selenium.webdriver import ActionChains
from selenium.webdriver import Chrome
from selenium.webdriver import ChromeOptions
from selenium.webdriver.support.ui import WebDriverWait
class Login(object):
    &quot;&quot;&quot;
    python + seleniuum + cv2
    &quot;&quot;&quot;
    def __init__(self,proxyIP=&#39;&#39;):
        # 如果是实际应用中，可在此处账号和密码
        self.option = ChromeOptions()
        # 不加ip，模拟验证码可能有问题
        if(proxyIP):
            self.option.add_argument(&quot;--proxy-server=&quot;+proxyIP);
        self.option.add_argument(&#39;--headless&#39;);
        self.option.add_experimental_option(&#39;excludeSwitches&#39;, [&#39;enable-automation&#39;])
        self.driver = Chrome(options=self.option)
    
    def seturl(self,url):
        self.url = url;
    
    @staticmethod
    def get_postion(otemp, oblk):
        &quot;&quot;&quot;
        判断缺口位置
        :param chunk: 缺口图片是原图
        :param canves:
        :return: 位置 x, y
        &quot;&quot;&quot;
        target = cv2.imread(otemp, 0)
        template = cv2.imread(oblk, 0)
        # w, h = target.shape[::-1]
        temp = &#39;temp.jpg&#39;
        targ = &#39;targ.jpg&#39;
        #imwrite
        cv2.imwrite(temp, template)
        cv2.imwrite(targ, target)
        
        target = cv2.imread(targ)
        target = cv2.cvtColor(target, cv2.COLOR_BGR2GRAY)
        target = abs(255 - target)
        
        cv2.imwrite(targ, target)
        target = cv2.imread(targ)
        template = cv2.imread(temp)
        result = cv2.matchTemplate(target, template, cv2.TM_CCOEFF_NORMED)
        x, y = np.unravel_index(result.argmax(), result.shape)
        return x, y

    @staticmethod
    def get_track(distance):
        tracks = []
        distance = int(distance);
        tracks.append(distance)
        return tracks;

    @staticmethod
    def urllib_download(imgurl, imgsavepath):
        from urllib.request import urlretrieve
        urlretrieve(imgurl, imgsavepath)
        
    def quit2(self):
        self.driver.execute_script(&quot;window.close();&quot;);
        self.driver.switch_to.window(self.driver.window_handles[-1])
        
    def quit(self):
        self.driver.quit();
        
    def login_main(self, driver):
        driver.switch_to.default_content()
        #滑块iframe
        driver.switch_to.frame(driver.find_element_by_tag_name(&quot;iframe&quot;))
        # 大图
        bk_block = driver.find_element_by_xpath(&#39;//img[@id=&quot;slideBkg&quot;]&#39;)  
        web_image_width = bk_block.size
        web_image_width = web_image_width[&#39;width&#39;]
        bk_block_x = bk_block.location[&#39;x&#39;]
     # 小滑块
        slide_block = driver.find_element_by_xpath(&#39;//img[@id=&quot;slideBlock&quot;]&#39;)  
        slide_block_x = slide_block.location[&#39;x&#39;]
        bk_block = driver.find_element_by_xpath(&#39;//img[@id=&quot;slideBkg&quot;]&#39;).get_attribute(&#39;src&#39;) # 大图 url
#       print(bk_block);
        slide_block = driver.find_element_by_xpath(&#39;//img[@id=&quot;slideBlock&quot;]&#39;).get_attribute(&#39;src&#39;) # 小滑块 图片url
#       print(slide_block);
        slid_ing = driver.find_element_by_xpath(&#39;//div[@id=&quot;slide_bar_head&quot;]&#39;)  # 滑块

        #下载图片分析
        os.makedirs(&#39;./image/&#39;, exist_ok=True)
        self.urllib_download(bk_block, &#39;./image/bkBlock.png&#39;)
        self.urllib_download(slide_block, &#39;./image/slideBlock.png&#39;)
        time.sleep(0.5)
        img_bkblock = Image.open(&#39;./image/bkBlock.png&#39;)
        bkblock_real_width = img_bkblock.size[0]
        # 滑块宽度/大图背景宽度
        width_scale = float(bkblock_real_width) / float(web_image_width)
        #opencv分析,获取滑块与嵌块的位置
        position = self.get_postion(&#39;./image/bkBlock.png&#39;, &#39;./image/slideBlock.png&#39;)
        real_position = position[1] / width_scale
        real_position = real_position - (slide_block_x - bk_block_x)
        #滑动的轨迹
        track_list = self.get_track(real_position)
        # 点击鼠标左键，按住不放
        ActionChains(driver).click_and_hold(on_element=slid_ing).perform()  
        time.sleep(0.2)
        #拖动滑块
        for track in track_list:
            #移动鼠标到嵌块距离
            ActionChains(driver).move_by_offset(xoffset=track, yoffset=0).perform()
        # 释放鼠标
        ActionChains(driver).release(on_element=slid_ing).perform()

    def main(self):
        driver = self.driver
        driver.maximize_window()
        print(self.url);
        #url 这里开始赋值
        driver.get(self.url)
        time.sleep(4)
        self.login_main(driver)
        driver.switch_to.default_content() #切换主页面
        #获取相关详细信息
        time.sleep(4)
        # 这里获取不了，只能尝试再获取一次验证码的
        try:
            test = driver.find_element_by_class_name(&#39;profile-card-user-info-description&#39;)
            #和对应的id存起来
            content = test.text;  
            return test.text;
        except Exception as e:
            reutrn;
        
#获取代理ip
def getproxyIP():
   # 大家可以找出免费的代码ip
    proxyurl = &quot;xx&quot;;
    response = urllib.request.urlopen(proxyurl)
    proxyIP = response.read();
    proxyIP = proxyIP.decode(&quot;unicode_escape&quot;)
    proxyIP = str(proxyIP);
    return proxyIP;
    
if __name__ == &#39;__main__&#39;:
    ssl._create_default_https_context = ssl._create_unverified_context
    #跑取url的组成
    conn = pymysql.connect(host=&#39;127.0.0.1&#39;, port=3306, user=&#39;root&#39;, passwd=&#39;root&#39;, db=&#39;phpshow&#39;, charset=&#39;utf8mb4&#39;)
    # 创建游标
    cursor = conn.cursor()
    while(1):
        cursor.execute(&quot;select UserId from spider where crawl=&#39;1&#39; and intro is Null limit 10&quot;);
        res = cursor.fetchall();
        if res==False:
            break;
        proxyIP = getproxyIP();
        print(proxyIP);
        #这里要有异常处理
        login = Login(proxyIP)
        for val in res:
            print(val[0]);
            try:
                time.sleep(1);
                #url规则，手动更改
                url = str(&quot;https://xx.com/search/author?keyword=&quot;)+str(val[0])+str(&quot;&amp;page=1&quot;);
                
                login.seturl(url);
                text = login.main()
                print(text);
                if text:
                    print(&quot;update&quot;);
                    cursor2 = conn.cursor();
                    # 表名
                    update_sql = &quot;update xx set intro=&#39;&quot;+str(text)+&quot;&#39; where UserId = &#39;&quot;+str(val[0])+&quot;&#39;&quot;;
                    print(update_sql);
                    tmp = cursor2.execute(update_sql);
                    conn.commit();
                    cursor2.close;
                #退出浏览器
    #           login.quit();
            except Exception as e:
                login.quit2();
                print(&quot;error&quot;);
        login.quit();
        print(&quot;---------------------------&quot;);
    ```
</code></pre>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[游戏运营相关参数]]></title>
    <link href="http://www.shengsheng.net/15811419649126.html"/>
    <updated>2020-02-08T14:06:04+08:00</updated>
    <id>http://www.shengsheng.net/15811419649126.html</id>
    <content type="html"><![CDATA[
<h1 id="toc_0">计算公式</h1>

<ul>
<li>新增注册数：规定区服条件下的新增注册玩家数</li>
<li>老用户：规定区服条件下的非当日新增注册的登陆玩家数</li>
<li>DAU：新增注册数+老用户 （日活跃用户）</li>
<li>新用户付费金额：新增注册玩家的总付费金额 （新总）</li>
<li>总付费金额：新增注册玩家+老用户产生的总充值金额 （新+老）</li>
<li>新用户付费人数：新增注册玩家中充值玩家总数 （新付人数）</li>
<li>新增付费率：新用户付费数/新增注册数 （新付数/新)</li>
<li>总付费人数：新增注册玩家+老用户产生的总充值人数 (新付+老付)</li>
<li>注册ARPPU：新用户付费金额/新用户付费人数 （新付/新付数）</li>
<li>活跃ARPPU：总付费金额/总付费人数  （总付/总付人）</li>
<li>活跃付费率：总付费人数/DAU  (总付数/活跃人数)</li>
<li>活跃ARPU：活跃ARPPU<em>活跃付费率 (arppu</em>付费率，也可以= 总付金额/dau)</li>
<li>至今（LTV和充值类型数据 可加入）</li>
<li>活跃ARPU：活跃ARPPU*活跃付费率 （同上，很好理解，反过来的逻辑）</li>
<li>新增付费率 = （新增付费人数 / 新增注册数) </li>
<li>活跃付费率 = 付费用户数 / 总用户数</li>
<li>注册ARPU = 新增人数付费金额 / 新增注册数</li>
<li>注册ARPPU = 新增人数付费金额 / 新增付费人数</li>
<li>活跃ARPU = 付费金额 / 总用户数</li>
<li>活跃ARPPU = 付费金额 / 付费人数</li>
<li>活跃付费率 = 付费用户 / 总用户数</li>
<li>注册成本 = 成本 / 新增注册数 </li>
<li>激活注册率 = 注册 / 激活数  （这个要创角上传的情况下）</li>
<li>激活成本 = 成本 / 激活数     （激活看是否注册还是创角）</li>
<li>创角率 = 创角数 / 新增注册数<br/></li>
</ul>

<hr/>

<ol>
<li>DNU（Daily New Users）： 每日游戏中的新登入用户数量</li>
<li>AU（Active Users）：活跃用户，统计周期内，登录过游戏的用户数</li>
<li>相应的，根据统计周期，有DAU(日活跃用户)，WAU(周活跃用户),MAU(月活跃用户)等。</li>
<li>PU ( Paying User）：付费用户</li>
<li>APA（Active Payment Account）：活跃付费用户数</li>
<li>这里我们要注意“用户”和“付费用户”的区分，这也将影响收入的计算。</li>
<li>ARPU(<strong>Average Revenue Per User</strong>) ：平均每用户收入，即可通过 总收入/AU 计算得出。</li>
<li>(平均收入每个用户)</li>
<li>ARPPU (<strong>Average Revenue Per Paying User</strong>)： 平均每付费用户收入，可通过 总收入/APA 计算得出。</li>
<li>（平均收入每个付费用户)</li>
<li>PUR(Pay User Rate)：付费比率，可通过 APA/AU 计算得出。</li>
<li>LTV(Lift Time Value)：生命周期价值，即平均一个用户在首次登录游戏到最后一次登录游戏内，为该游戏创造的收入总计</li>
<li>投资回报率（ROI）=产出（销售收入）/ 投入（成本</li>
</ol>

<hr/>

<p>至今LTV = 累积金额 / 总人数<br/>
苹果至今=苹果内购累积金额/注册数<br/>
苹果付费金额</p>

<hr/>

<h1 id="toc_1">选项</h1>

<h2 id="toc_2">查询维度</h2>

<ul>
<li>按日期+系统</li>
<li>按日期</li>
<li>按游戏</li>
<li>接日期+游戏</li>
<li>落地页</li>
<li>日期+落地页</li>
<li>渠道</li>
<li>日期+渠道</li>
<li>日期+渠道+落地页<br/>
## 系统</li>
<li>全部</li>
<li>IOS</li>
<li>Android</li>
</ul>

<h2 id="toc_3">类型</h2>

<ul>
<li>LTV</li>
<li>LTV比值</li>
<li>LTV+LTV比值</li>
<li>充值</li>
<li>留存数</li>
<li>留存率</li>
<li>充值留存数</li>
<li>充值留存率</li>
<li>回本</li>
<li>回本率</li>
<li>注册</li>
</ul>

<h2 id="toc_4">范围</h2>

<ul>
<li>1~180天</li>
<li>1~24小时</li>
</ul>

<h2 id="toc_5">排序</h2>

<p>这个用得十分少，可以去掉</p>

<h2 id="toc_6">权限</h2>

<ul>
<li>游戏负责管理 </li>
<li>渠道负责</li>
<li>游戏项目负责</li>
</ul>

<h2 id="toc_7">运营相关</h2>

<ul>
<li>修改玩家的手机号码</li>
</ul>

<h2 id="toc_8">其它</h2>

<p>CPA：<br/>
Cost Per Action 每效果成本——即按照效果付费。<br/>
CPC：<br/>
Cost Per Click;Cost Per Thousand Click-Through 每点击成本。<br/>
CPT：<br/>
Cost Per Time，CPT 是一种以时间来计费的广告。<br/>
CPS：<br/>
英文全称 Cost Per Sales。CPS 是一种以实际销售产品数量来计算广告费用的广告。<br/>
CPPA：<br/>
按照到达用户付费。既不是按照浏览量（PV）付费，也不是按照实际效果付费，而是按照到达的用户那个付费，在网站上等同于 UV，在手机端是新增用户上游数据（例如用户已下载安装还未打开激活 APP 的数量即为到达用户）</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[gradle读书笔记]]></title>
    <link href="http://www.shengsheng.net/15809578628586.html"/>
    <updated>2020-02-06T10:57:42+08:00</updated>
    <id>http://www.shengsheng.net/15809578628586.html</id>
    <content type="html"><![CDATA[
<p>date: 2019-09-03 19:46</p>

<p>gradle读书笔记</p>

<p>repositories代码块将JCenter配置成一个仓库，在这种情况下，一个仓库意味着一系列的依赖包，或者说，在我们应用和依赖项目中可使用的一系列可下载的函数库。JCenter是一个很有名的Maven库。</p>

<p>dependencies代码块用于配置构建过程中的依赖包。这也意味着你不能将你的应用或依赖项目所需要的依赖包包含在顶层构建文件中。默认情况下，唯一被定义的依赖包是Gradle的Android插件。每个Android模块都需要有Android插件，因为该插件可使其执行Android相关的任务。</p>

<p>只要你使用了allprojects，模块就会被耦合到项目。这意味着，其很可能在没有主项目构建文件的情况下，无法独立构建模块。最初，这看起来可能不是一个问题，但是如果你后面想要分离一个内部依赖库到自己的项目，那么你将需要重构你的构建文件。</p>

<p>第一个，compileSdkVersion，是要用来编译应用的AndroidAPI版本。第二个，buildToolsVersion，是构建工具和编译器使用的版本号。</p>

<p>assemble：集合项目的输出。clean：清理项目的输出。check：运行所有检查，通常是单元测试和集成测试。build：同时运行assemble和check。Java基础插件添加了源集的概念。Android插件构建于这些约定，这样经验丰富的Gradle用户就可以看到这些暴露的任务。在这些基本的任务之上，Android插件也添加了很多Android特有的任务。</p>

<p>connectedCheck：在连接设备或模拟器上运行测试。deviceCheck：一个占位任务，专为其他插件在远端设备上运行测试。installDebug和installRelease：在连接的设备或模拟器上安装特定版本。所有的installtasks都会有相关的uninstall任务。</p>

<p>在Gradle中，有一些便捷和可扩展的概念可用来定位这些常见问题。前面提到过，每个由AndroidStudio创建的新项目都会生成debug和release构建类型。另外一个概念是productflavor（不同定制的产品），其让管理多个应用或依赖库版本成为可能。构建类型和productflavor经常结合在一起使用，可以很容易地处理测试和生产应用的免费和付费版本。构建类型和productflavor的结合结果被称之为构建variant。</p>

<pre><code class="language-android{buildtypes{release{minifyenabledfalseproguardfilesgetdefaultproguardfile(&#39;proguardandroid.txt&#39;),&#39;proguardrules.pro&#39;}">
android{productFlavors{red{applicationId&#39;com.gradleforandroid.red&#39;versionCode3}blue{applicationId&#39;com.gradleforandroid.blue&#39;minSdkVersion14versionCode4}}}
</code></pre>

<p>和构建类型类似，productflavor也可以拥有它们自己的源集目录。为一个特殊的flavor创建一个文件夹就和创建一个有flavor名称的文件夹一样简单。你甚至可以为一个特定构建类型和flavor的结合体创建一个文件夹。该文件夹的名称将是flavor名称＋构建类型的名称。例如，如果你想让blueflavor的release版本有一个不同的应用图标，那么文件夹将会被叫作blueRelease。合并文件夹的组成将比构建类型文件夹和productflavor文件夹拥有更高优先级。</p>

<p>源集的引入额外增加了构建进程的复杂性。Gradle的Android插件在打包应用之前将main源集和构建类型源集合并在一起。此外，library项目也可以提供额外的资源，这些也需要被合并。这同样适用于manifest文件。例如，在你应用的debugvariant中可能需要额外的Android权限来存储log文件。你并不想在main源集中申明该权限，因为这会吓跑潜在客户。相反，你可以在debug构建类型的源集中额外添加一个manifest文件来申明额外的权限。</p>

<p>签名配置：</p>

<pre><code class="language-text">android{signingConfigs{staging.initWith(signingConfigs.debug)release{storeFilefile(&quot;release.keystore&quot;)storePassword&quot;secretpassword&quot;keyAlias&quot;gradleforandroid&quot;keyPassword&quot;secretpassword&quot;}}}

</code></pre>

<p>这是建立多模块项目最简单、最直接的方式。在项目的settings.gradle文件中声明了所有的模块，如下所示：include&#39;:app&#39;,&#39;:library&#39;该代码确保了app和library模块包含在构建配置中。你需要做的就是添加模块的目录名。</p>

<p>dependencies{compileproject(&#39;:library&#39;)}</p>

<p>AppEngine插件添加了许多任务，其中使用最多的是appengineRun和appengineUpdate。appengineRun任务用来开启一个本地开发服务器，这样就可以在上传到GoogleAppEngine之前，本地测试整个后端。第一次运行该任务时，构建可能需要一段时间，因为Gradle需要下载AppEngineSDK。我们早已通过downloadSdk=true来设置下载行为。要想停止服务器，你可以使用appengineStop。</p>

<p>Closures是匿名代码块，可以接受参数和返回值。它们可以被视为变量，被当作参数传递给方法。</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[钟总公开课笔记。]]></title>
    <link href="http://www.shengsheng.net/15809578629104.html"/>
    <updated>2020-02-06T10:57:42+08:00</updated>
    <id>http://www.shengsheng.net/15809578629104.html</id>
    <content type="html"><![CDATA[
<p>date: 2017-08-28 03:26</p>

<p>为什么要换工作？</p>

<ul>
<li>  没意思 心态上或没人聊天 ，不满意  薪水，升个职<br/></li>
<li><br/></li>
<li>  如果这公司发生的，可能到下家公司也会遇到！</li>
<li><br/></li>
<li>  最基础的开端其实是从心态开始</li>
<li><br/></li>
<li><p>结果，时间</p></li>
<li><p>下份工作目标</p></li>
<li><p>赚钱   钱在哪里？  大公司，创业？</p></li>
<li><p>稳定   透过佛法看世界</p></li>
<li></li>
<li><p>两种公司，歌酒菜，画大饼</p></li>
<li><p>歌酒菜，没情怀！</p></li>
<li></li>
<li><p>梦想是要靠现实来支撑的</p></li>
<li></li>
<li><p>歌酒菜</p></li>
<li><p>抱X包类，贪便宜</p></li>
<li><p>快速支付 </p></li>
<li><p>健康养生</p></li>
<li><p>成人用品</p></li>
<li></li>
<li><p>区块链ico     </p></li>
<li><p>技术与操盘</p></li>
<li></li>
<li><p>情怀与梦想</p></li>
<li><p>公司是可以赚快钱 企业要慢慢捱</p></li>
<li><p>企业：战略与管理   </p></li>
<li></li>
<li><p>ppt 成果展示  </p></li>
<li></li>
<li><p>组织人才，其实要培训自己的团队</p></li>
<li><p>招高管  你能帮我带多少人过来</p></li>
<li><p>判断做事：1.效率  2.效益 </p></li>
<li><p>功劳和苦劳</p></li>
<li></li>
<li><p>用对人，做对事</p></li>
<li><p>自聪明人与机器人（自动化）！</p></li>
<li><p>以技术的能力取代人工！以核心的数据分析！  算法部分</p></li>
<li><p>流程产品化</p></li>
<li><p>结果反馈机制</p></li>
<li><p>数据，算法，协同  人工智能三要素</p></li>
<li><p>挖掘需求，效率更高</p></li>
<li><p>数据智能，数据化，算法化，智能化</p></li>
<li></li>
<li></li>
<li><p>我作为一个投资人，我要看到一个企业横向和纵向的分析 </p></li>
<li></li>
<li><p>基础数据要进行分析 </p></li>
<li></li>
<li><p>谈判条件 </p></li>
<li><p>你有什么优势，你能做什么，带来什么价值 </p></li>
<li><p>你有什么要求，工资？ 要准备心态 </p></li>
<li><p>有可能工作一年重踏旧路，我又不想干了</p></li>
<li><p>志同道合 </p></li>
<li><p>门当户对</p></li>
<li><p>压力源于自身不足，动力源于自身实力</p></li>
<li></li>
<li></li>
<li><p>别盲目选，给自己三天时间好好思考一下，选择自己所爱的，爱自己所选的</p></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[mysql PARTITION表分区要注意事项]]></title>
    <link href="http://www.shengsheng.net/15809578629394.html"/>
    <updated>2020-02-06T10:57:42+08:00</updated>
    <id>http://www.shengsheng.net/15809578629394.html</id>
    <content type="html"><![CDATA[
<p>date: 2017-04-18 16:33</p>

<p>把表进行分区，数据量有一定的时候，会减轻压力。</p>

<p>1.主键，一定要使用复合主键。例如，主键为id, 复合字段就是 id,date</p>

<p>2.按月进行分区，其它没区分出的，放在MAXVALUE</p>

<p>3.写个shell crond,每个月设置一次。</p>

<p>例:</p>

<p>alter table day PARTITION by range(itime_d div 100)<br/>
(<br/>
partition day_2017_01 values less than (201701),<br/>
partition day_2017_02 values less than (201702),<br/>
partition day_2017_03 values less than (201703),<br/>
PARTITION day_2017_04 VALUES less than MAXVALUE<br/>
);</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[数据库区分大小写问题]]></title>
    <link href="http://www.shengsheng.net/15809578629442.html"/>
    <updated>2020-02-06T10:57:42+08:00</updated>
    <id>http://www.shengsheng.net/15809578629442.html</id>
    <content type="html"><![CDATA[
<p>date: 2017-04-12 02:10</p>

<p>其实关于自己选择集有关</p>

<p>例如列有:</p>

<p>user</p>

<p>gw</p>

<p>GW</p>

<p>查询时候group by user，只有GW</p>

<p>ALTER TABLE table CHANGE COLUMN <code>user</code> <code>user</code> varchar(100) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL COMMENT &#39;名称&#39;;</p>

<p>改变collate就会区分大小写的了</p>

<p>设置collate（校对） 。 collate规则：</p>

<p>*_bin: 表示的是binary case sensitive collation，也就是说是区分大小写的<br/>
*_cs: case sensitive collation，区分大小写<br/>
*_ci: case insensitive collation，不区分大小写</p>

<p>对于只是单项查询区分，使用binary就可够了。 where user binary(&#39;gw&#39;);</p>

<p>sql的一个例子：</p>

<p>select user collate utf8_bin from table group by user collate utf8_bin;</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[小玩微信小程序]]></title>
    <link href="http://www.shengsheng.net/15809578629495.html"/>
    <updated>2020-02-06T10:57:42+08:00</updated>
    <id>http://www.shengsheng.net/15809578629495.html</id>
    <content type="html"><![CDATA[
<p>date: 2017-04-05 14:54</p>

<p>上周玩了两三晚微信小程序，开发了一个简单事例：</p>

<p>官方文档：<a href="https://mp.weixin.qq.com/debug/wxadoc/dev/index.html?t=2017327">https://mp.weixin.qq.com/debug/wxadoc/dev/index.html?t=2017327</a></p>

<p>首先当然是注册一个小程序的号，然后下载个小程序微信开发。</p>

<p>小程序里面提供了一套mvc的架构，按照架构就可以开发了，很容易理解。</p>

<p>值得注意的是页面是使用html+css..但js未必是jquery的，里面提供了一套api.</p>

<p>例如发起请求：wx.request(OBJECT)<br/>
<pre><code class="lang-javascript">wx.request({<br/>
  url: <span class="hljs-string">&#39;test.php&#39;</span>, <span class="hljs-comment">//仅为示例，并非真实的接口地址</span><br/>
  data: {<br/>
     x: <span class="hljs-string">&#39;&#39;</span> ,<br/>
     y: <span class="hljs-string">&#39;&#39;</span><br/>
  },<br/>
  header: {<br/>
      <span class="hljs-string">&#39;content-type&#39;</span>: <span class="hljs-string">&#39;application/json&#39;</span><br/>
  },<br/>
  success: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{<br/>
    <span class="hljs-built_in">console</span>.log(res.data)<br/>
  }<br/>
})<br/>
</code></pre><br/>
但和服务端通通一定要使用https,这里硬规定，现在的app很多都走https了，更安全吧。</p>

<p>使用https,避免明文被窃听。</p>

<p>申请好https之后，如果是nginx,加多一个server即可， 不影响之前的配置。</p>

<p>server {<br/>
listen 443;<br/>
server_name <a href="http://www.anyway.cn">www.anyway.cn</a>;</p>

<p>//https开启<br/>
ssl on;<br/>
ssl_certificate /ddd/cert/1_<a href="http://www.anyway.cn_bundle.crt">www.anyway.cn_bundle.crt</a>;<br/>
ssl_certificate_key /ddd/cert/2_<a href="http://www.anyway.cn.key">www.anyway.cn.key</a>;<br/>
ssl_session_timeout 5m;<br/>
ssl_protocols TLSv1 TLSv1.1 TLSv1.2;<br/>
ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;<br/>
ssl_prefer_server_ciphers on;</p>

<p>}</p>

<p>审核大概两天的时间就差不多了，但是提交的版本，你发了最新版本，也只能按提交时候的版本来审核。</p>

<p>现在看了一下统计，每也也有一些用户递增，那就足够了，有兴趣，可以添加『手机归属地』体验一下。</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[博客暂停访问原因]]></title>
    <link href="http://www.shengsheng.net/15809578629750.html"/>
    <updated>2020-02-06T10:57:42+08:00</updated>
    <id>http://www.shengsheng.net/15809578629750.html</id>
    <content type="html"><![CDATA[
<p>date: 2017-01-21 02:20</p>

<p>最近被攻击，导致停机几天，主要wordpress的xmlrpc.php被一直访问。</p>

<p>一早以为是腾讯云坑了。具体排查了一下，发现是php-fpm进程卡住了。</p>

<p>[21-Jan-2017 08:27:39] [pool www] pid 5966<br/>
script_filename = /data/wwwroot/default/xmlrpc.php<br/>
[0x00007efddb412c20] curl_exec() /data/wwwroot/default/wp-includes/Requests/Transport/cURL.php:162<br/>
[0x00007efddb412b50] request() /data/wwwroot/default/wp-includes/class-requests.php:379<br/>
[0x00007efddb412a40] request() /data/wwwroot/default/wp-includes/class-http.php:365<br/>
[0x00007efddb4128a0] request() /data/wwwroot/default/wp-includes/class-http.php:590<br/>
[0x00007efddb4127e0] get() /data/wwwroot/default/wp-includes/http.php:70<br/>
[0x00007efddb412730] wp_safe_remote_get() /data/wwwroot/default/wp-includes/class-wp-xmlrpc-server.php:6303<br/>
[0x00007efddb412480] pingback_ping() /data/wwwroot/default/wp-includes/IXR/class-IXR-server.php:115<br/>
[0x00007efddb4123a0] call() /data/wwwroot/default/wp-includes/IXR/class-IXR-server.php:65<br/>
[0x00007efddb4122b0] serve() /data/wwwroot/default/wp-includes/IXR/class-IXR-server.php:27<br/>
[0x00007efddb412210] __construct() /data/wwwroot/default/wp-includes/IXR/class-IXR-server.php:35<br/>
[0x00007efddb412170] IXR_Server() /data/wwwroot/default/wp-includes/class-wp-xmlrpc-server.php:206<br/>
[0x00007efddb412100] serve_request() /data/wwwroot/default/xmlrpc.php:84</p>

<p>自己暴网站文件地址真的好么？哈哈。。。。</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[mac下设置内置键盘失效]]></title>
    <link href="http://www.shengsheng.net/15809578630162.html"/>
    <updated>2020-02-06T10:57:43+08:00</updated>
    <id>http://www.shengsheng.net/15809578630162.html</id>
    <content type="html"><![CDATA[
<p>date: 2016-01-21 08:54</p>

<p>使用hhkb，想禁用内置键盘</p>

<p>辅助与设置-》启用鼠标键-》设置连按5下option启用即可</p>

<p>不过delte键和f1那些是不禁用的。</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[今天工作遇到的小问题总结]]></title>
    <link href="http://www.shengsheng.net/15809578630724.html"/>
    <updated>2020-02-06T10:57:43+08:00</updated>
    <id>http://www.shengsheng.net/15809578630724.html</id>
    <content type="html"><![CDATA[
<p>date: 2015-11-18 19:21</p>

<p>InnoDB: Unable to lock ./ibdata1, error: 11<br/>
InnoDB: Check that you do not already have another mysqld process<br/>
InnoDB: using the same InnoDB data or log files.<br/>
不使用/etc/init.d/mysql restart<br/>
使用service mysql restart 即可</p>

<p>setcookie 如果时间设置为0,即session就过期</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[hhkb体验]]></title>
    <link href="http://www.shengsheng.net/15809578630972.html"/>
    <updated>2020-02-06T10:57:43+08:00</updated>
    <id>http://www.shengsheng.net/15809578630972.html</id>
    <content type="html"><![CDATA[
<p>date: 2015-11-06 09:58</p>

<p>hhkb跳线相关<br/>
011001</p>

<p>开启mac模式，6是多媒体相关</p>

<p>锁屏<br/>
fn + ctrl + shift + esc</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[mysql update不了原因]]></title>
    <link href="http://www.shengsheng.net/15809578631013.html"/>
    <updated>2020-02-06T10:57:43+08:00</updated>
    <id>http://www.shengsheng.net/15809578631013.html</id>
    <content type="html"><![CDATA[
<p>date: 2015-11-05 11:25</p>

<p>update bone_m_element set thumb=CONCAT(thumb,&#39;dia.jpg&#39;) where thumb like &#39;%gju%&#39;</p>

<p>update不了的原因是 char(100) 不够长，改为 char(200)即可</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[if empty打错字的后果。]]></title>
    <link href="http://www.shengsheng.net/15809578631093.html"/>
    <updated>2020-02-06T10:57:43+08:00</updated>
    <id>http://www.shengsheng.net/15809578631093.html</id>
    <content type="html"><![CDATA[
<p>date: 2015-11-03 14:04</p>

<p>打错字：<br/>
if(empty(\(a &amp;&amp; empty(\)b))<br/>
{</p>

<p>}<br/>
//不符合条件也是对的<br/>
正确的话：<br/>
if(empty(\(a) &amp;&amp; empty(\)b))<br/>
{</p>

<p>}</p>

<p>// \(b = &quot;123&quot;;<br/>
// \)c = &quot;567&quot;;<br/>
// \(a = empty(\)b &amp;&amp; false);<br/>
// var_dump($a);exit();</p>

<p>// if( false &amp;&amp; false)<br/>
// {<br/>
//     echo &#39;ok&#39;;exit();<br/>
// }else{<br/>
//     echo &#39;no&#39;;exit();<br/>
// }</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[mysql的一些小问题]]></title>
    <link href="http://www.shengsheng.net/15809578631182.html"/>
    <updated>2020-02-06T10:57:43+08:00</updated>
    <id>http://www.shengsheng.net/15809578631182.html</id>
    <content type="html"><![CDATA[
<p>date: 2015-10-31 09:29</p>

<p>直接mysqld启动没socket，<br/>
有时为了方便直接使用mysqld,但socket文件没创建，要保证运行顺畅，还是使用mysqld_safe启动。</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[淘宝客链接转换]]></title>
    <link href="http://www.shengsheng.net/15809578631365.html"/>
    <updated>2020-02-06T10:57:43+08:00</updated>
    <id>http://www.shengsheng.net/15809578631365.html</id>
    <content type="html"><![CDATA[
<p>date: 2015-10-23 15:43</p>

<p>工作需要，转换淘宝链接</p>

<pre><code class="language-$header">$refer =  $header[&#39;Location&#39;];

$tu = explode(&quot;tu=&quot;,$refer);
$tu = $tu[&#39;1&#39;];
$url = urldecode($tu);

$user_agent = &#39;Mozilla/5.0 (Windows; U; Windows NT 5.2; zh-CN; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13&#39;;
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 10);
curl_setopt($ch, CURLOPT_REFERER, $refer);
curl_setopt($ch, CURLOPT_USERAGENT, $user_agent);
   
$result = curl_exec($ch);
$errno  = curl_errno($ch);
$infos = curl_getinfo($ch); 
    
curl_close($ch);
$h = $infos[&#39;redirect_url&#39;];
echo $h; //淘宝链接
</code></pre>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[php static extends]]></title>
    <link href="http://www.shengsheng.net/15809578632176.html"/>
    <updated>2020-02-06T10:57:43+08:00</updated>
    <id>http://www.shengsheng.net/15809578632176.html</id>
    <content type="html"><![CDATA[
<p>date: 2015-09-09 11:06</p>

<p>工作上遇到的问题：<br/>
class a{public static \(a=&#39;1&#39;;public static function a(){echo self::\)a}<br/>
class b exntends a{public static $a=&#39;2&#39;}</p>

<p>b::a();<br/>
输出是1,<br/>
原因在parent self,静态方法要使用static<br/>
把class a的self改为static即可</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[mac dash]]></title>
    <link href="http://www.shengsheng.net/15809578632450.html"/>
    <updated>2020-02-06T10:57:43+08:00</updated>
    <id>http://www.shengsheng.net/15809578632450.html</id>
    <content type="html"><![CDATA[
<p>date: 2015-09-01 08:34</p>

<p>最近买了款软件dash..</p>

<p>内置购买用了128.。</p>

<p>感觉体验不错。查询十分方便。</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[tabs切换]]></title>
    <link href="http://www.shengsheng.net/15809578632578.html"/>
    <updated>2020-02-06T10:57:43+08:00</updated>
    <id>http://www.shengsheng.net/15809578632578.html</id>
    <content type="html"><![CDATA[
<p>date: 2015-08-24 08:39</p>

<p>onfocus onblur</p>

<p>获得 失去焦点</p>

<pre><code class="language-text">function $(ID){return document.getElementById(ID)}function showTab(ID){for(var i=1;i&amp;lt;4;i++){if(ID==i){$(&#39;tab&#39;+i).blur();$(&quot;tab&quot;+i).className=&quot;on&quot;;$(&quot;cont&quot;+i).style.display=&quot;block&quot;;}else{$(&quot;tab&quot;+i).className=&quot;off&quot;;$(&quot;cont&quot;+i).style.display=&quot;none&quot;;}}return false;}
</code></pre>

]]></content>
  </entry>
  
</feed>
